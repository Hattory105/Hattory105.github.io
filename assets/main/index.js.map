{"version":3,"sources":["assets/Scripts/character.js","assets/Scripts/continue_button.js","assets/Scripts/current_marker.js","assets/Scripts/fade_in.js","assets/Scripts/fade_out.js","assets/Scripts/gameover.js","assets/Scripts/limiter_-2_dBFS.js","assets/Scripts/limiter_-5_dBFS.js","assets/Scripts/limiter_0_dBFS.js","assets/Scripts/normal_loop.js","assets/Scripts/scenario_A.js","assets/Scripts/scenario_B.js","assets/Scripts/scenario_C.js","assets/Scripts/seamless_loop.js","assets/Scripts/sound_lib_ts.ts","assets/Scripts/sound_lib.js","assets/Scripts/stage_01.js","assets/Scripts/stage_02.js","assets/Scripts/stage_03.js","assets/Scripts/stage_04.js","assets/Scripts/stage_05.js","assets/Scripts/stage_06.js","assets/Scripts/try_again_button.js","assets/Scripts/tutorial_button.js","assets/migration/use_v2.0.x_cc.Toggle_event.js","assets/Scripts/utils.js","assets/Scripts/win.js"],"names":["cc","Class","extends","Component","properties","moveSpeed","game","default","type","Node","onKeyDown","event","keyCode","macro","KEY","w","this","pressDown","pressLeft","pressRight","pressUp","s","a","d","initChar","dirChangeable","moveUp","moveDown","moveLeft","moveRight","onLoad","boundLeft","node","width","getComponent","outlinePrefab","data","gapX","boundRight","boundBot","height","gapY","boundTop","col","startCell","x","row","y","currentCel","v2","systemEvent","on","SystemEvent","EventType","KEY_DOWN","zIndex","onDestroy","off","checkMovedInCell","currentCelY","currentCelX","checkHitObstacle","obstArray","i","length","checkHitCapturedCell","capturedCell","updateCapturedCell","resetCapturedCell","update","Math","ceil","director","loadScene","winGoal","backgroundNode","find","stage","removePersistRootNode","delta","touch","getDelta","start","parent","current_marker","fade_in","fade_out","stageScene","SceneAsset","limiter_negative_2_dBFS","limiter_negative_5_dBFS","limiter_0_dBFS","normal_loop","scenario_A_trigger","scenario_B_trigger","scenario_C_trigger","seamless_loop","_a","_decorator","ccclass","property","NewClass","_super","_this","apply","arguments","audioTestDisplay","seamlessAudioList","fadeAudioList","fps","frameCount","totalVolume","audioList","__extends","prototype","SeamlessAudio","clip","AudioClip","id","startBuffer","endBuffer","getId","setId","value","getStartBuffer","setStartBuffer","getEndBuffer","setEndBuffer","FadeAudio","fadeRate","endVolume","fadeCheckTime","endTime","getFadeRate","setFadeRate","getEndVolume","setEndVolume","getFadeCheckTime","setFadeCheckTime","getEndTime","setEndTime","startTime","Date","getTime","resources","load","err","self","clip_1","clip_2","markerTest","totalLimiter","limiter","volume","threshold","audio","document","createElement","src","nativeUrl","context","AudioContext","source","createMediaElementSource","preGain","createGain","createDynamicsCompressor","knee","ratio","attack","release","connect","destination","newVolume","pow","console","log","setLimiterAuto","orgTotalVolume","audioEngine","getState","getVolume","rate","setVolume","play","loop","push","getFormat","substr","toLowerCase","playSeamlessAudio","seamlessProcess","isLoop","getCurrentTime","getDuration","setCurrentTime","playFadeAudio","startVolume","requiredTime","remainingTime","updateFadeRate","totalFrame","volumeGap","fadeProcess","getFPS","markerToTimeInSec","marker","timeArray","split","hour","min","sec","milSec","parseInt","playAtMarker","getCurrentTimeMarker","currentTime","floor","round","q","stopAll","string","e","r","t","u","__decorate","Label","exports","getAudio","setAudio","getAudioSrc","LimiterAudio","limitDBFS","maxPCM","fading","getLimitDBFS","setLimitDBFS","getMaxPCM","setMaxPCM","isFading","setFading","playingList","limitRate","clip_3","clip_4","Intro_A","Intro_B","Loop","Outro_A","Outro_B","Outro_B_Test","Outro_C_Test","fade","checkMarker","step","scenario","gameCallMarker","setTotalLimiter","setVolumeRate","getTotalLimiter","totalMaxPCM","numOfPlaying","paused","totalDBFS","log10","sqrt","_i","_i2","_newVolume","audioCtx","url","Audio","processor","createScriptProcessor","addEventListener","undefined","limiterAudio","onaudioprocess","evt","input","inputBuffer","getChannelData","len","aud","abs","pause","uncacheAll","formatStr","duration","splice","idleTime","timeInSecToMarker","_currentTime","nextBeatInMilSec","displayNextBeat","getNextBeatInMilSec","preId","getNextBeatWithAlign","nextBeatAfterGCInMilSec","triggerPoint","o","p","l","compareTime","time_1_milsec","time_2_milsec","limitGap","currentMarker","gapOfBeats","numOfNextBeat","durationInMilSec","timeInMilSec","numOfPassedBeats","diff","alignMarker","alignTimeInMilSec","currentTimeInMilSec","endTimeInMilSec","timeGapInMilSec","scenarioA","scenarioB","scenarioC","background","score","totalScore","flowerPrefab","Prefab","fencePrefab","character","addPersistRootNode","player","size","outlinePool","flowerPool","NodePool","flower","instantiate","put","map","flowerPos","fencePos","maxRow","rowCount","maxCol","colCount","setPosition","getCellPos","fencePool","createObstacle","startPos","putObj","pos","grassPrefab","grassPos","grassPool","_i3","sheepPrefab","sheepPos","sheepIndexList","sheepPool","_i4","createObj","objCollection","hitSheep","sheepTmp","removeFromParent","snowFlakePrefab","iglooPrefab","iceSkatePrefab","snowballPrefab","orgPos","snowFlakePool","snowFlake","snowFlakePos","iglooPos","iceSkatePos","snowballPos","iglooPool","iceSkatePool","snowballIndexList","snowballPool","spdUpAmount","spdUp","snowballSpd","maxSnowballPerCol","_i5","_i6","snowballIndex","checkCollapsed","j","dir","dirTmp","snowballPos_1","snowballPos_2","snowballIndexList_1","snowballIndexList_2","_i7","_i8","_snowballIndex","tutorial_0","isActive","tutorial_1","active","here","endTut","Toggle","_triggerEventInScript_check","scoreDisplay","outline","createOutline","parentNode","order","get","objPrefab","pool","obj","objPosArray","obj_1","obj_2","checkDist","position","sub","getPosition","mag"],"mappings":"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","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        moveSpeed: 1,\r\n\t\tgame: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t}\r\n    },\r\n\t\r\n\tonKeyDown (event) {\r\n        // set a flag when key pressed\r\n        switch(event.keyCode) {\r\n\t\t\tcase cc.macro.KEY.w:\r\n\t\t\t\tthis.pressDown = false;\r\n\t\t\t\tthis.pressLeft = false;\r\n\t\t\t\tthis.pressRight = false;\r\n\t\t\t\tthis.pressUp = true;\r\n                break;\r\n\t\t\tcase cc.macro.KEY.s:\r\n                this.pressUp = false;\t\t\t\t\r\n\t\t\t\tthis.pressLeft = false;\r\n\t\t\t\tthis.pressRight = false;\t\t\t\r\n\t\t\t\tthis.pressDown = true;\r\n                break;\t\r\n            case cc.macro.KEY.a:\r\n                this.pressUp = false;\r\n\t\t\t\tthis.pressDown = false;\t\t\t\t\r\n\t\t\t\tthis.pressRight = false;\t\t\t\t\r\n\t\t\t\tthis.pressLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.pressUp = false;\r\n\t\t\t\tthis.pressDown = false;\r\n\t\t\t\tthis.pressLeft = false;\r\n\t\t\t\tthis.pressRight = true;\r\n                break;\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\t\r\n\tinitChar: function () {\r\n\t\t//this.node.setPosition(cc.v2(this.boundLeft, this.boundBot));\r\n\t\tthis.dirChangeable = true;\r\n\t\tthis.pressUp = false;\r\n        this.pressDown = false;\r\n\t\tthis.pressLeft = false;\r\n        this.pressRight = false;\r\n\t\tthis.moveUp = false;\r\n\t\tthis.moveDown = false;\r\n\t\tthis.moveLeft = false;\r\n\t\tthis.moveRight = false;\r\n\t\t// this.game.node.getComponent('utils').putObj(this.game.node, cc.v2(this.node.x, this.node.y));\r\n\t},\r\n\r\n    onLoad: function () {\r\n\t\tthis.boundLeft = -this.game.node.width / 2 + this.game.node.getComponent('utils').outlinePrefab.data.width / 2 + this.game.node.getComponent('utils').gapX;\r\n\t\tthis.boundRight = this.game.node.width / 2 - this.game.node.getComponent('utils').outlinePrefab.data.width / 2 - this.game.node.getComponent('utils').gapX;\r\n\t\tthis.boundBot = -this.game.node.height / 2 + this.game.node.getComponent('utils').outlinePrefab.data.height / 2 + this.game.node.getComponent('utils').gapY;\r\n\t\tthis.boundTop = this.game.node.height / 2 - this.game.node.getComponent('utils').outlinePrefab.data.height / 2 - this.game.node.getComponent('utils').gapY;\r\n\t\tthis.initChar();\r\n\t\tthis.col = this.game.startCell.x;\r\n\t\tthis.row = this.game.startCell.y;\r\n\t\tthis.currentCel = cc.v2(this.col, this.row);\r\n\t\tcc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\t\tthis.node.zIndex = 2;\r\n\t},\r\n\t\r\n\tonDestroy () {\r\n        // Cancel keyboard input monitoring\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n    },\r\n\r\n    // start: function () {\r\n\t\t\r\n    // },\r\n\t\r\n\tcheckMovedInCell: function () {\r\n\t\tif (this.moveUp) {\r\n\t\t\tthis.dirChangeable = false;\r\n\t\t\tthis.node.y += this.moveSpeed;\r\n\t\t\tif ((this.col != this.currentCel.x || this.row != this.currentCel.y) && this.node.y > this.currentCelY) {\r\n\t\t\t\tthis.node.y = this.currentCelY;\r\n\t\t\t\tthis.dirChangeable = true;\r\n\t\t\t\tthis.currentCel = cc.v2(this.col, this.row);\r\n\t\t\t\t//this.game.putFlower(this.game.node, cc.v2(currentCelX - this.game.node.width / 2, currentCelY - this.game.node.height / 2));\r\n\t\t\t\treturn cc.v2(this.currentCelX, this.currentCelY);\r\n\t\t\t}\r\n\t\t} else if (this.moveDown) {\r\n\t\t\tthis.dirChangeable = false;\r\n\t\t\tthis.node.y -= this.moveSpeed;\r\n\t\t\tif ((this.col != this.currentCel.x || this.row != this.currentCel.y) && this.node.y < this.currentCelY) {\r\n\t\t\t\tthis.node.y = this.currentCelY;\r\n\t\t\t\tthis.dirChangeable = true;\r\n\t\t\t\tthis.currentCel = cc.v2(this.col, this.row);\r\n\t\t\t\t//this.game.putFlower(this.game.node, cc.v2(currentCelX - this.game.node.width / 2, currentCelY - this.game.node.height / 2));\r\n\t\t\t\treturn cc.v2(this.currentCelX, this.currentCelY);\r\n\t\t\t}\r\n\t\t} else if (this.moveRight) {\r\n\t\t\tthis.dirChangeable = false;\r\n\t\t\tthis.node.x += this.moveSpeed;\r\n\t\t\tif ((this.col != this.currentCel.x || this.row != this.currentCel.y) && this.node.x > this.currentCelX) {\r\n\t\t\t\tthis.node.x = this.currentCelX;\r\n\t\t\t\tthis.dirChangeable = true;\r\n\t\t\t\tthis.currentCel = cc.v2(this.col, this.row);\r\n\t\t\t\t//this.game.putFlower(this.game.node, cc.v2(currentCelX - this.game.node.width / 2, currentCelY - this.game.node.height / 2));\r\n\t\t\t\treturn cc.v2(this.currentCelX, this.currentCelY);\r\n\t\t\t}\r\n\t\t} else if (this.moveLeft) {\r\n\t\t\tthis.dirChangeable = false;\r\n\t\t\tthis.node.x -= this.moveSpeed;\r\n\t\t\tif ((this.col != this.currentCel.x || this.row != this.currentCel.y) && this.node.x < this.currentCelX) {\r\n\t\t\t\tthis.node.x = this.currentCelX;\r\n\t\t\t\tthis.dirChangeable = true;\r\n\t\t\t\tthis.currentCel = cc.v2(this.col, this.row);\r\n\t\t\t\t//this.game.putFlower(this.game.node, cc.v2(currentCelX - this.game.node.width / 2, currentCelY - this.game.node.height / 2));\r\n\t\t\t\treturn cc.v2(this.currentCelX, this.currentCelY);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\t\r\n\tcheckHitObstacle: function (obstArray) {\r\n\t\tfor (let i = 0; i < obstArray.length; i++) {\r\n\t\t\tif (obstArray[i].x == this.node.x && obstArray[i].y == this.node.y) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\t\r\n\tcheckHitCapturedCell: function (obstArray) {\r\n\t\tif (this.capturedCell != null && (this.col != this.capturedCell.x || this.row != this.capturedCell.y)) {\r\n\t\t\tfor (let i = 0; i < obstArray.length; i++) {\r\n\t\t\t\tif (obstArray[i].x == this.node.x && obstArray[i].y == this.node.y) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\t\r\n\tupdateCapturedCell: function () {\r\n\t\tthis.capturedCell = cc.v2(this.col, this.row);\r\n\t},\r\n\t\r\n\tresetCapturedCell: function () {\r\n\t\tthis.capturedCell = cc.v2(-1, -1);\r\n\t},\r\n\r\n    update: function (dt) {\r\n\t\tthis.col = Math.ceil((this.node.x + this.game.node.width / 2) / this.game.node.getComponent('utils').outlinePrefab.data.width);\r\n\t\tthis.row = Math.ceil((this.node.y + this.game.node.height / 2) / this.game.node.getComponent('utils').outlinePrefab.data.height);\r\n\t\tthis.currentCelX = this.col * this.game.node.getComponent('utils').outlinePrefab.data.width + this.game.node.getComponent('utils').gapX - this.game.node.getComponent('utils').outlinePrefab.data.width / 2 - this.game.node.width / 2;\r\n\t\tthis.currentCelY = this.row * this.game.node.getComponent('utils').outlinePrefab.data.height + this.game.node.getComponent('utils').gapY - this.game.node.getComponent('utils').outlinePrefab.data.height / 2 - this.game.node.height / 2;\r\n\t\tif (this.node.x < this.boundLeft) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t} else if (this.node.x > this.boundRight) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.node.y < this.boundBot) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t} else if (this.node.y > this.boundTop) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t} \r\n\t\tif (this.game.winGoal.x == this.node.x && this.game.winGoal.y == this.node.y) {\r\n\t\t\tcc.director.loadScene('Win');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.dirChangeable) {\r\n\t\t\tif (this.pressUp) {\r\n\t\t\t\tthis.moveUp = true;\r\n\t\t\t\tthis.moveDown = false;\r\n\t\t\t\tthis.moveLeft = false;\r\n\t\t\t\tthis.moveRight = false;\r\n\t\t\t} else if (this.pressDown) {\r\n\t\t\t\tthis.moveUp = false;\r\n\t\t\t\tthis.moveDown = true;\r\n\t\t\t\tthis.moveLeft = false;\r\n\t\t\t\tthis.moveRight = false;\r\n\t\t\t} else if (this.pressLeft) {\r\n\t\t\t\tthis.moveUp = false;\r\n\t\t\t\tthis.moveDown = false;\r\n\t\t\t\tthis.moveLeft = true;\r\n\t\t\t\tthis.moveRight = false;\r\n\t\t\t} else if (this.pressRight) {\r\n\t\t\t\tthis.moveUp = false;\r\n\t\t\t\tthis.moveDown = false;\r\n\t\t\t\tthis.moveLeft = false;\r\n\t\t\t\tthis.moveRight = true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tlet backgroundNode = cc.find(\"background\");\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tcc.director.loadScene('Stage_0' + (backgroundNode.stage + 1));\r\n\t\t\tcc.game.removePersistRootNode(backgroundNode);\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').current_marker();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').fade_in();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').fade_out();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        stageScene: cc.SceneAsset\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\t\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').limiter_negative_2_dBFS();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').limiter_negative_5_dBFS();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').limiter_0_dBFS();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').normal_loop();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').scenario_A_trigger();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').scenario_B_trigger();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').scenario_C_trigger();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tthis.parent.getComponent('sound_lib').seamless_loop();\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\t\r\n\t// For testing\r\n\t@property(cc.Label)\r\n\tprivate audioTestDisplay: cc.Label = null;\r\n\r\n\t// List of seamless loop audios to play\r\n\tprivate seamlessAudioList: Array<cc.Class> = [];\r\n\t\r\n\t// List of fading audios to play\r\n\tprivate fadeAudioList: Array<cc.Class> = [];\r\n\t\r\n\t// Starting time of the lib\r\n\tprivate startTime : number;\r\n\t\r\n\t// FPS\r\n\tprivate fps : number = 0;\r\n\t\r\n\t// Frame count\r\n\tprivate frameCount : number = 0;\r\n\t\r\n\t// Total limiter\r\n\tprivate totalVolume : number = 0;\r\n\t\t\r\n\t// Playing list for limiter\r\n\tprivate audioList: Array<Integer> = [];\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    protected onLoad() {\r\n\t\t\r\n\t\t// Customized class for storing info of seamless audio\r\n\t\tthis.SeamlessAudio = cc.Class({\r\n\t\t\t\r\n\t\t\tproperties: {\r\n\t\t\t\tclip : cc.AudioClip,\r\n\t\t\t\tid: 0,\r\n\t\t\t\tstartBuffer: 0,\r\n\t\t\t\tendBuffer : 0,\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetId: function () {\r\n\t\t\t\treturn this.id;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetId: function (value) {\r\n\t\t\t\tthis.id = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetStartBuffer: function () {\r\n\t\t\t\treturn this.startBuffer;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetStartBuffer: function (value) {\r\n\t\t\t\tthis.startBuffer = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetEndBuffer: function () {\r\n\t\t\t\treturn this.endBuffer;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetEndBuffer: function (value) {\r\n\t\t\t\tthis.endBuffer = value;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// Customized class for storing info of fading audio\r\n\t\tthis.FadeAudio = cc.Class({\r\n\t\t\t\r\n\t\t\tproperties: {\r\n\t\t\t\tid: 0,\r\n\t\t\t\tfadeRate: 0,\r\n\t\t\t\tendVolume: 0,\r\n\t\t\t\tfadeCheckTime: 0,\r\n\t\t\t\tendTime: 0,\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetId: function () {\r\n\t\t\t\treturn this.id;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetId: function (value) {\r\n\t\t\t\tthis.id = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetFadeRate: function () {\r\n\t\t\t\treturn this.fadeRate;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetFadeRate: function (value) {\r\n\t\t\t\tthis.fadeRate = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetEndVolume: function () {\r\n\t\t\t\treturn this.endVolume;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetEndVolume: function (value) {\r\n\t\t\t\tthis.endVolume = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetFadeCheckTime: function () {\r\n\t\t\t\treturn this.fadeCheckTime;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetFadeCheckTime: function (value) {\r\n\t\t\t\tthis.fadeCheckTime = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetEndTime: function () {\r\n\t\t\t\treturn this.endTime;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetEndTime: function (value) {\r\n\t\t\t\tthis.endTime = value;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// Starting time of the lib\r\n\t\tthis.startTime = (new Date()).getTime();\r\n\t\t\r\n\t\t// For testing\r\n\t\t// this.load();\r\n\t\tcc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\t\tcc.resources.load(\"Sounds/spark_man\", function (err, clip) {\r\n\t\t\tself.clip_1 = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/Loop\", function (err, clip) {\r\n\t\t\tself.clip_2 = clip;\r\n\t\t});\r\n\t\tthis.markerTest = false;\r\n\t\tthis.totalLimiter(-2);\r\n\t}\r\n\t\r\n\t// For testing\r\n\t// protected load() \r\n\t// {\r\n\t\t// let url = \"Sounds/spark_man\";\r\n\t\t// let loop = true;\r\n\t    // let volume = 1;\r\n\t\t// var self = this;\r\n\t\t// cc.resources.load(url, function (err, clip) {\r\n\t\t\t// let path = clip.nativeUrl;\r\n\t\t\t// let id = self.play(clip, true, 1);\r\n\t\t\t// self.playSeamlessAudio(id, 150, 440);\r\n\t\t\t// self.playFadeAudio(id, 0, 0.9, 10000);\r\n\t\t\t// self.playAtMarker(id, \"0:1:0:0\");\r\n\t\t// });\r\n\t// }\r\n\t\r\n\t// Limiter to avoid clipping and distortion when many audios playing at once\r\n\t// Param:\r\n\t//\t\tclip: audio file (cc.AudioClip)\r\n\t//\t\tvolume: audio volume to play (0.0 ~ 1.0)\r\n\t//\t\tthreshold: limited db (float)\r\n\tprotected limiter(clip, volume, threshold)\r\n\t{\r\n\t\tvar audio = document.createElement('audio');\r\n\t\taudio.src = clip.nativeUrl;\r\n\t\tvar context = new AudioContext();\r\n\t\tvar source = context.createMediaElementSource(audio);\r\n\t\tvar preGain = context.createGain();\r\n\t\tvar limiter = context.createDynamicsCompressor();\r\n\t\tlimiter.threshold.value = threshold; // this is the pitfall, leave some headroom\r\n\t\tlimiter.knee.value = 0.0; // brute force\r\n\t\tlimiter.ratio.value = 20.0; // max compression\r\n\t\tlimiter.attack.value = 0.005; // 5ms attack\r\n\t\tlimiter.release.value = 0.050; // 50ms release\r\n\t\tsource.connect(preGain);\r\n\t\tpreGain.connect(limiter);\r\n\t\tlimiter.connect(context.destination);\r\n\t\tthreshold /= 20;\r\n\t\tlet newVolume = Math.pow(10, threshold);\r\n\t\tconsole.log(\"New volume: \" + newVolume);\r\n\t\tif (newVolume < volume)\r\n\t\t\treturn newVolume;\r\n\t\tif (volume > 1)\r\n\t\t\treturn 1;\r\n\t\telse\r\n\t\t\treturn volume;\r\n\t}\r\n\t\r\n\t// Total limiter for all playing audios\r\n\t// Param:\r\n\t//\t\tthreshold: limited db (float)\r\n\tprotected totalLimiter(threshold)\r\n\t{\r\n\t\tthreshold /= 20;\r\n\t\tthis.totalVolume = Math.pow(10, threshold);\r\n\t\tconsole.log(\"Limiter: \" + this.totalVolume);\r\n\t}\r\n\t\r\n\t// Automatically set limiter for all audios which are playing at the moment\r\n\tprotected setLimiterAuto()\r\n\t{\r\n\t\tif (this.totalVolume > 0 && this.audioList.length > 0)\r\n\t\t{\r\n\t\t\tthis.totalVolume /= this.audioList.length;\r\n\t\t\tlet orgTotalVolume = 0;\r\n\t\t\tfor (let i = 0; i < this.audioList.length; i++)\r\n\t\t\t{\r\n\t\t\t\tif (cc.audioEngine.getState(i) == 1)\r\n\t\t\t\t{\r\n\t\t\t\t\torgTotalVolume += cc.audioEngine.getVolume(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconsole.log(\"Original total volume: \" + orgTotalVolume);\r\n\t\t\tlet rate = this.totalVolume / orgTotalVolume;\r\n\t\t\tconsole.log(\"Rate: \" + rate);\r\n\t\t\tfor (let i = 0; i < this.audioList.length; i++)\r\n\t\t\t{\r\n\t\t\t\tconsole.log(\"Old volume \" + i + \" : \" + cc.audioEngine.getVolume(i));\r\n\t\t\t\tlet newVolume = cc.audioEngine.getVolume(i) * rate;\r\n\t\t\t\tif (newVolume < cc.audioEngine.getVolume(i))\r\n\t\t\t\t\tcc.audioEngine.setVolume(this.audioList[i], newVolume);\r\n\t\t\t\tconsole.log(\"New volume \" + i + \" : \" + cc.audioEngine.getVolume(i));\r\n\t\t\t}\r\n\t\t\tthis.totalVolume *= this.audioList.length;\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Customized audio playing function from original cocos engine to add limiter\r\n\t// Param:\r\n\t//\t\tclip: audio file (cc.AudioClip)\r\n\t//\t\tloop: looping (boolean)\r\n\t//\t\tvolume: audio volume to play (0.0 ~ 1.0)\r\n\t//\t\tvolume: audio volume to play (0.0 ~ 1.0)\r\n\t//\t\tthreshold: limited db (float)\r\n\tprotected play(clip, loop, volume, threshold)\r\n\t{\r\n\t\tif (this.totalVolume == 0)\r\n\t\t{\r\n\t\t\treturn cc.audioEngine.play(clip, loop, this.limiter(clip, volume, threshold));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlet id = cc.audioEngine.play(clip, loop, this.limiter(clip, volume, threshold));\r\n\t\t\tthis.audioList.push(id);\r\n\t\t\treturn id;\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Get format of audio file (mp3, ogg, wav)\r\n\t// Param:\r\n\t//\t\tclip: audio file (cc.AudioClip)\r\n\tprotected getFormat(clip)\r\n\t{\r\n\t\treturn clip.nativeUrl.substr(clip.nativeUrl.length - 3, 3).toLowerCase();\r\n\t}\r\n\t\r\n\t// Init and add new instance of Seamless audio class to seamless loop list\r\n\t// Param:\r\n\t//\t\tid: id of the playing audio (integer)\r\n\t//\t\tstartBuffer: time to skip from the begining (milisecond)\r\n\t//\t\tendBuffer: time to trim from the end (milisecond)\r\n\tprotected playSeamlessAudio(id, startBuffer, endBuffer)\r\n\t{\r\n\t\tstartBuffer /= 1000;\r\n\t\tendBuffer /= 1000;\r\n\t\tlet audio = new this.SeamlessAudio();\r\n\t\taudio.setId(id);\r\n\t\taudio.setStartBuffer(startBuffer);\r\n\t\taudio.setEndBuffer(endBuffer);\r\n\t\tthis.seamlessAudioList.push(audio);\r\n\t}\r\n\t\r\n\t// Control the timing of all the seamless loop audios\r\n\tprotected seamlessProcess()\r\n\t{\r\n\t\tfor (let i = 0; i < this.seamlessAudioList.length; i++)\r\n\t\t{\r\n\t\t\tif (cc.audioEngine.isLoop(this.seamlessAudioList[i].getId())\r\n\t\t\t\t&& cc.audioEngine.getState(this.seamlessAudioList[i].getId()) == 1\r\n\t\t\t\t&& cc.audioEngine.getCurrentTime(this.seamlessAudioList[i].getId()) > cc.audioEngine.getDuration(this.seamlessAudioList[i].getId()) - this.seamlessAudioList[i].getEndBuffer()\r\n\t\t\t\t)\r\n\t\t\t{\r\n\t\t\t\tcc.audioEngine.setCurrentTime(this.seamlessAudioList[i].getId(), this.seamlessAudioList[i].getStartBuffer());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Init and add new instance of FadeAudio class to fading audio list\r\n\t// Param:\r\n\t//\t\tid: id of the playing audio (integer)\r\n\t//\t\tstartVolume: starting volume of the audio from the begining of fading (0.0 ~ 1.0)\r\n\t//\t\tendVolume: final volume of the audio at the end of fading (0.0 ~ 1.0)\r\n\t// \t\trequiredTime: desired time to reach the final volume (milisecond)\r\n\tprotected playFadeAudio(id, startVolume, endVolume, requiredTime)\r\n\t{\r\n\t\tif (this.fps > 0)\r\n\t\t{\r\n\t\t\tlet remainingTime = (cc.audioEngine.getDuration(id) - cc.audioEngine.getCurrentTime(id)) * 1000;\r\n\t\t\tif (requiredTime == 0 || remainingTime < requiredTime)\r\n\t\t\t{\r\n\t\t\t\trequiredTime = remainingTime;\r\n\t\t\t}\r\n\t\t\tcc.audioEngine.setVolume(id, startVolume);\r\n\t\t\tlet audio = new this.FadeAudio();\r\n\t\t\taudio.setId(id);\r\n\t\t\taudio.setEndVolume(endVolume);\r\n\t\t\taudio.setFadeCheckTime(new Date().getTime());\r\n\t\t\taudio.setEndTime(audio.getFadeCheckTime() + requiredTime);\r\n\t\t\tthis.updateFadeRate(audio);\r\n\t\t\tthis.fadeAudioList.push(audio);\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Calculate the volume changing rate of each frame based on fps and remaining required time\r\n\t// Param:\r\n\t//\t\taudio: audio file (cc.AudioClip)\r\n\tprotected updateFadeRate(audio)\r\n\t{\r\n\t\tlet remainTime = audio.getEndTime() - (new Date()).getTime();\r\n\t\tlet totalFrame = (remainTime/ 1000) * this.fps;\r\n\t\tlet volumeGap = audio.getEndVolume() - cc.audioEngine.getVolume(audio.getId());\r\n\t\taudio.setFadeRate(volumeGap / totalFrame);\r\n\t}\r\n\t\r\n\t// Control the volume of all audios in fading process\r\n\tprotected fadeProcess()\r\n\t{\r\n\t\tfor (let i = 0; i < this.fadeAudioList.length; i++)\r\n\t\t{\r\n\t\t\tif (cc.audioEngine.getVolume(this.fadeAudioList[i].getId()) != this.fadeAudioList[i].getEndVolume())\r\n\t\t\t{\r\n\t\t\t\tif (this.fadeAudioList[i].getFadeRate() > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (cc.audioEngine.getVolume(this.fadeAudioList[i].getId()) > this.fadeAudioList[i].getEndVolume())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcc.audioEngine.setVolume(this.fadeAudioList[i].getId(), this.fadeAudioList[i].getEndVolume());\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.fadeAudioList[i].getFadeRate() < 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (cc.audioEngine.getVolume(this.fadeAudioList[i].getId()) < this.fadeAudioList[i].getEndVolume())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcc.audioEngine.setVolume(this.fadeAudioList[i].getId(), this.fadeAudioList[i].getEndVolume());\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.updateFadeRate(this.fadeAudioList[i]);\r\n\t\t\t\tcc.audioEngine.setVolume(this.fadeAudioList[i].getId(), cc.audioEngine.getVolume(this.fadeAudioList[i].getId()) + this.fadeAudioList[i].getFadeRate());\r\n\t\t\t}\r\n\t\t\t// console.log(\"Volume at \" + ((new Date()).getTime() - this.fadeAudioList[i].getFadeCheckTime()) + \" \" + cc.audioEngine.getVolume(this.fadeAudioList[i].getId()));\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Get fps\r\n\tprotected getFPS()\r\n\t{\r\n\t\tif ((new Date()).getTime() - this.startTime >= 1000)\r\n\t\t{\r\n\t\t\tthis.fps = this.frameCount;\r\n\t\t\tthis.frameCount = 0;\r\n\t\t\tthis.startTime = (new Date()).getTime();\r\n\t\t\t// console.log(\"FPS: \" + this.fps);\r\n\t\t}\r\n\t\tthis.frameCount += 1;\r\n\t}\r\n\t\r\n\t// Convert marker to specific time within audio duration\r\n\t// Param:\r\n\t//\t\tmarker: desired time to play the audio with format \"hh:mm:ss:SSS\" \r\n\tprotected markerToTimeInSec(marker)\r\n\t{\r\n\t\tlet timeArray = marker.split(\":\");\r\n\t\tlet hour = 0;\r\n\t\tlet min = 0;\r\n\t\tlet sec = 0;\r\n\t\tlet milSec = 0;\r\n\t\tif (timeArray.length == 4)\r\n\t\t{\r\n\t\t\thour = parseInt(timeArray[0]);\r\n\t\t\tmin = parseInt(timeArray[1]);\r\n\t\t\tsec = parseInt(timeArray[2]);\r\n\t\t\tmilSec = parseInt(timeArray[3]);\r\n\t\t}\r\n\t\telse if (timeArray.length == 3)\r\n\t\t{\r\n\t\t\tmin = parseInt(timeArray[0]);\r\n\t\t\tsec = parseInt(timeArray[1]);\r\n\t\t\tmilSec = parseInt(timeArray[2]);\r\n\t\t}\r\n\t\telse if (timeArray.length == 2)\r\n\t\t{\r\n\t\t\tsec = parseInt(timeArray[0]);\r\n\t\t\tmilSec = parseInt(timeArray[1]);\r\n\t\t}\r\n\t\telse if (timeArray.length == 1)\r\n\t\t{\r\n\t\t\tmilSec = parseInt(timeArray[0]);\r\n\t\t}\r\n\t\tlet totalSec = hour * 3600 + min * 60 + sec + (milSec / 1000);\r\n\t\treturn totalSec;\r\n\t}\r\n\t\r\n\t// Play the audio at desired time with marker\r\n\t// Param:\r\n\t//\t\tmarker: desired time to play the audio with format \"hh:mm:ss:SSS\"\r\n\tprotected playAtMarker(id, marker)\r\n\t{\r\n\t\tcc.audioEngine.setCurrentTime(id, this.markerToTimeInSec(marker));\r\n\t}\r\n\t\r\n\tprotected getCurrentTimeMarker(id)\r\n\t{\r\n\t\tlet currentTime = cc.audioEngine.getCurrentTime(id);\r\n\t\tlet hour = Math.floor(currentTime / 3600);\r\n\t\t// console.log(\"hour \" + hour);\r\n\t\tlet min = Math.floor(currentTime / 60);\r\n\t\tif (min > 59)\r\n\t\t\tmin = 59;\r\n\t\t// console.log(\"min \" + min);\r\n\t\tlet sec = Math.floor(currentTime - hour * 3600 - min * 60);\r\n\t\t//console.log(\"sec \" + sec);\r\n\t\tlet milSec = currentTime - Math.floor(currentTime);\r\n\t\t// console.log(\"milsec \" + milSec);\r\n\t\tmilSec *= 1000;\r\n\t\tif (milSec > 999)\r\n\t\t\tmilSec = 999;\r\n\t\tlet marker = \"\" + hour + \":\" + min + \":\" + sec + \":\" + Math.round(milSec);\r\n\t\treturn marker;\r\n\t}\r\n\t\r\n\tonKeyDown (event) {\r\n        // set a flag when key pressed\r\n        switch(event.keyCode) {\r\n\t\t\tcase cc.macro.KEY.q:\r\n\t\t\t\tthis.markerTest = false;\r\n\t\t\t\tcc.audioEngine.stopAll();\r\n\t\t\t\tthis.id = this.play(self.clip_2, true, 1, 0);\r\n\t\t\t\tthis.playSeamlessAudio(this.id, 0, 0);\r\n\t\t\t\tconsole.log(\"Normal loop\");\r\n\t\t\t\tthis.audioTestDisplay.string = \"Normal loop\";\r\n                break;\r\n\t\t\tcase cc.macro.KEY.w:\r\n\t\t\t\tthis.markerTest = false;\r\n\t\t\t\tcc.audioEngine.stopAll();\r\n\t\t\t\tthis.id = this.play(self.clip_2, true, 1, 0);\r\n\t\t\t\tthis.playSeamlessAudio(this.id, 0, 0);\r\n\t\t\t\tconsole.log(\"Seamless loop\");\r\n\t\t\t\tthis.audioTestDisplay.string = \"Seamless loop\";\r\n                break;\r\n\t\t\tcase cc.macro.KEY.e:\r\n\t\t\t\tthis.markerTest = false;\r\n\t\t\t\tcc.audioEngine.stopAll();\r\n\t\t\t\tthis.id = this.play(self.clip_1, true, 1, 0);\r\n\t\t\t\tthis.playFadeAudio(this.id, 0, 1, 20000);\r\n\t\t\t\tconsole.log(\"Fade in\");\r\n\t\t\t\tthis.audioTestDisplay.string = \"Fade in in 20 secs\";\r\n                break;\r\n\t\t\tcase cc.macro.KEY.r:\r\n\t\t\t\tthis.markerTest = false;\r\n\t\t\t\tcc.audioEngine.stopAll();\r\n\t\t\t\tthis.id = this.play(self.clip_1, true, 1, 0);\r\n\t\t\t\tthis.playFadeAudio(this.id, 1, 0, 15000);\r\n\t\t\t\tconsole.log(\"Fade out\");\r\n\t\t\t\tthis.audioTestDisplay.string = \"Fade out in 15 secs\";\r\n                break;\r\n\t\t\tcase cc.macro.KEY.t:\r\n\t\t\t\tthis.markerTest = false;\r\n\t\t\t\tcc.audioEngine.stopAll();\r\n\t\t\t\tthis.id = this.play(self.clip_1, true, 1, 0);\r\n\t\t\t\tthis.playAtMarker(this.id, \"0:1:2:0\");\r\n\t\t\t\tconsole.log(\"Play at 0:1:2:0\");\r\n\t\t\t\tthis.audioTestDisplay.string = \"Play audio at 0:1:2:0\";\r\n                break;\r\n\t\t\tcase cc.macro.KEY.y:\r\n\t\t\t\tthis.markerTest = false;\r\n\t\t\t\tcc.audioEngine.stopAll();\r\n\t\t\t\tthis.id = this.play(self.clip_1, true, 1, 0);\r\n\t\t\t\tthis.playAtMarker(this.id, \"0:2:5:50\");\r\n\t\t\t\tconsole.log(\"Play at 0:2:5:50\");\r\n\t\t\t\tthis.audioTestDisplay.string = \"Play audio at 0:2:5:50\";\r\n                break;\r\n\t\t\tcase cc.macro.KEY.u:\r\n\t\t\t\tthis.markerTest = false;\r\n\t\t\t\tcc.audioEngine.stopAll();\r\n\t\t\t\tthis.play(self.clip_1, true, 1, -2);\r\n\t\t\t\tthis.playAtMarker(this.play(self.clip_1, true, 0.5, -2), \"0:2:5:50\");\r\n\t\t\t\tthis.playAtMarker(this.play(self.clip_1, true, 0.5, -2), \"0:0:55:50\");\r\n\t\t\t\tconsole.log(\"Limiter\");\r\n\t\t\t\tthis.audioTestDisplay.string = \"Limiter\";\r\n                break;\r\n\t\t\tcase cc.macro.KEY.i:\r\n\t\t\t\tif (!this.markerTest)\r\n\t\t\t\t{\r\n\t\t\t\t\tcc.audioEngine.stopAll();\r\n\t\t\t\t\tthis.id = this.play(self.clip_1, true, 1, -2);\r\n\t\t\t\t\tlet currentTime = this.getCurrentTimeMarker(this.id);\r\n\t\t\t\t\tconsole.log(\"Playing at \" + currentTime);\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Playing at \" + currentTime;\r\n\t\t\t\t\tthis.markerTest = true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlet currentTime = this.getCurrentTimeMarker(this.id);\r\n\t\t\t\t\tconsole.log(\"Playing at \" + currentTime);\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Playing at \" + currentTime;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n        }\r\n    }\r\n\r\n    protected update(dt: number) {\r\n\t\tthis.getFPS();\r\n\t\tthis.seamlessProcess();\r\n\t\tthis.fadeProcess();\r\n\t\tthis.setLimiterAuto();\r\n\t}\r\n}\r\n","// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        audioTestDisplay: {\r\n            default: null,\r\n            type: cc.Label\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\t\r\n    onLoad: function () {\r\n\t\t\r\n\t\t// List of seamless loop audios to play\r\n\t\tthis.seamlessAudioList = [];\r\n\t\t\r\n\t\t// Customized class for storing info of seamless audio\r\n\t\tthis.SeamlessAudio = cc.Class({\r\n\t\t\t\r\n\t\t\tproperties: {\r\n\t\t\t\taudio : null,\r\n\t\t\t\tstartBuffer: 0,\r\n\t\t\t\tendBuffer : 0,\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetAudio: function () {\r\n\t\t\t\treturn this.audio;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetAudio: function (value) {\r\n\t\t\t\tthis.audio = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetStartBuffer: function () {\r\n\t\t\t\treturn this.startBuffer;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetStartBuffer: function (value) {\r\n\t\t\t\tthis.startBuffer = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetEndBuffer: function () {\r\n\t\t\t\treturn this.endBuffer;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetEndBuffer: function (value) {\r\n\t\t\t\tthis.endBuffer = value;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// List of fading audios to play\r\n\t\tthis.fadeAudioList = [];\r\n\t\t\r\n\t\t// Customized class for storing info of fading audio\r\n\t\tthis.FadeAudio = cc.Class({\r\n\t\t\t\r\n\t\t\tproperties: {\r\n\t\t\t\taudio: null,\r\n\t\t\t\tfadeRate: 0,\r\n\t\t\t\tendVolume: 0,\r\n\t\t\t\tfadeCheckTime: 0,\r\n\t\t\t\tendTime: 0,\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetAudio: function () {\r\n\t\t\t\treturn this.audio;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetAudio: function (value) {\r\n\t\t\t\tthis.audio = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetAudioSrc: function () {\r\n\t\t\t\treturn this.audio.getAudio();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetFadeRate: function () {\r\n\t\t\t\treturn this.fadeRate;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetFadeRate: function (value) {\r\n\t\t\t\tthis.fadeRate = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetEndVolume: function () {\r\n\t\t\t\treturn this.endVolume;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetEndVolume: function (value) {\r\n\t\t\t\tthis.endVolume = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetFadeCheckTime: function () {\r\n\t\t\t\treturn this.fadeCheckTime;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetFadeCheckTime: function (value) {\r\n\t\t\t\tthis.fadeCheckTime = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetEndTime: function () {\r\n\t\t\t\treturn this.endTime;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetEndTime: function (value) {\r\n\t\t\t\tthis.endTime = value;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// Customized class for storing info of limiter audio\r\n\t\tthis.LimiterAudio = cc.Class({\r\n\t\t\t\r\n\t\t\tproperties: {\r\n\t\t\t\tid: 0,\r\n\t\t\t\tlimitDBFS: 0,\r\n\t\t\t\tmaxPCM: -999,\r\n\t\t\t\taudio: null,\r\n\t\t\t\tfading: false,\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetId: function () {\r\n\t\t\t\treturn this.id;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetId: function (value) {\r\n\t\t\t\tthis.id = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tgetLimitDBFS: function () {\r\n\t\t\t\treturn this.limitDBFS;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetLimitDBFS: function (value) {\r\n\t\t\t\tthis.limitDBFS = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetMaxPCM: function () {\r\n\t\t\t\treturn this.maxPCM;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetMaxPCM: function (value) {\r\n\t\t\t\tthis.maxPCM = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetAudio: function () {\r\n\t\t\t\treturn this.audio;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetAudio: function (value) {\r\n\t\t\t\tthis.audio = value;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tisFading: function () {\r\n\t\t\t\treturn this.fading;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetFading: function (value) {\r\n\t\t\t\tthis.fading = value;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// List of playing audios\r\n\t\tthis.playingList = [];\r\n\t\t\r\n\t\t// Starting time of the lib\r\n\t\tthis.startTime = (new Date()).getTime();\r\n\t\t\r\n\t\t// FPS\r\n\t\tthis.fps = 0;\r\n\t\t\r\n\t\t// Frame count\r\n\t\tthis.frameCount = 0;\r\n\t\t\r\n\t\t// Total limiter\r\n\t\tthis.totalVolume = 0;\r\n\t\tthis.totalLimiter = -999;\r\n\t\t\r\n\t\t// Playing list for limiter\r\n\t\tthis.audioList = [];\r\n\t\t\r\n\t\t// Volume changing rate\r\n\t\tthis.limitRate = 0.02;\r\n\t\t\r\n\t\t// Headroom for limiter\r\n\t\t// this.headroom = 0.9;\r\n\t\t\r\n\t\t// For testing\r\n\t\tcc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\t\tcc.resources.load(\"Sounds/spark_man\", function (err, clip) {\r\n\t\t\tself.clip_1 = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/Loop\", function (err, clip) {\r\n\t\t\tself.clip_2 = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/shadow_man\", function (err, clip) {\r\n\t\t\tself.clip_3 = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/spark_mandrill\", function (err, clip) {\r\n\t\t\tself.clip_4 = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/MP3/Intro_A\", function (err, clip) {\r\n\t\t\tself.Intro_A = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/MP3/Intro_B\", function (err, clip) {\r\n\t\t\tself.Intro_B = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/MP3/Loop\", function (err, clip) {\r\n\t\t\tself.Loop = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/MP3/Outro_A\", function (err, clip) {\r\n\t\t\tself.Outro_A = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/MP3/Outro_B\", function (err, clip) {\r\n\t\t\tself.Outro_B = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/MP3/Outro_B_Test\", function (err, clip) {\r\n\t\t\tself.Outro_B_Test = clip;\r\n\t\t});\r\n\t\tcc.resources.load(\"Sounds/MP3/Outro_C_Test\", function (err, clip) {\r\n\t\t\tself.Outro_C_Test = clip;\r\n\t\t});\r\n\t\tthis.markerTest = false;\r\n\t\t\r\n\t\t// For Scenario Demo\r\n\t\tthis.fade = \"\";\r\n\t\tthis.checkMarker = \"\";\r\n\t\tthis.step = -1;\r\n\t\tthis.scenario = \"\";\r\n\t\tthis.gameCallMarker = 0;\r\n\t},\r\n\t\r\n\t// Limiter to avoid clipping and distortion when many audios playing at once\r\n\t// Param:\r\n\t//\t\tclip: audio file (cc.AudioClip)\r\n\t//\t\tvolume: audio volume to play (0.0 ~ 1.0)\r\n\t//\t\tthreshold: limited db (float)\r\n\t// limiter: function (clip, volume, threshold)\r\n\t// {\t\r\n\t\t// let newVolume = this.maxVolumeFromDBFS(threshold) * this.headroom;\r\n\t\t// console.log(\"New volume: \" + newVolume);\r\n\t\t// if (newVolume < volume)\r\n\t\t\t// return newVolume;\r\n\t\t// if (volume > 1)\r\n\t\t\t// return 1;\r\n\t\t// return volume;\r\n\t// },\r\n\t\r\n\t// maxVolumeFromDBFS: function (threshold)\r\n\t// {\r\n\t\t// this.totalLimiter = threshold;\r\n\t\t// threshold /= 20;\r\n\t\t// return Math.pow(10, threshold);\r\n\t// },\r\n\t\r\n\t// Total limiter for all playing audios\r\n\t// Param:\r\n\t//\t\tthreshold: limited db (float)\r\n\tsetTotalLimiter: function (threshold)\r\n\t{\r\n\t\tthis.totalLimiter = threshold;\r\n\t},\r\n\t\r\n\tsetVolumeRate: function (rate)\r\n\t{\r\n\t\tthis.limitRate = rate;\r\n\t},\r\n\t\r\n\tgetTotalLimiter: function ()\r\n\t{\r\n\t\treturn this.totalLimiter;\r\n\t},\r\n\t\r\n\t// Automatically set limiter for all audios which are playing at the moment\r\n\t/*\r\n\tsetLimiterAuto: function ()\r\n\t{\r\n\t\tif (this.totalVolume > 0 && this.audioList.length > 0)\r\n\t\t{\r\n\t\t\tlet orgTotalVolume = 0;\r\n\t\t\t// console.log(\"List length: \" + this.audioList.length);\r\n\t\t\tlet numOfPlaying = 0;\r\n\t\t\tfor (let i = 0; i < this.audioList.length; i++)\r\n\t\t\t{\r\n\t\t\t\tif (cc.audioEngine.getState(this.audioList[i]) == 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tnumOfPlaying += 1;\r\n\t\t\t\t\torgTotalVolume += cc.audioEngine.getVolume(this.audioList[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// console.log(\"Num of sound playing: \" + numOfPlaying);\r\n\t\t\tif (numOfPlaying == 0 || orgTotalVolume <= this.totalVolume)\r\n\t\t\t\treturn;\r\n\t\t\t// console.log(\"Original total volume: \" + orgTotalVolume);\r\n\t\t\tthis.totalVolume = this.totalVolume * (this.headroom + (1 - this.headroom) / numOfPlaying);\r\n\t\t\tconsole.log(\"New total volume: \" + this.totalVolume);\r\n\t\t\tlet rate = this.totalVolume / orgTotalVolume;\r\n\t\t\t// console.log(\"Rate: \" + rate);\r\n\t\t\tfor (let i = 0; i < this.audioList.length; i++)\r\n\t\t\t{\r\n\t\t\t\t// console.log(\"State \" + this.audioList[i] + \" : \" + cc.audioEngine.getState(this.audioList[i]));\r\n\t\t\t\tif (cc.audioEngine.getState(this.audioList[i]) == 1)\r\n\t\t\t\t{\r\n\t\t\t\t\t// console.log(\"Old volume \" + i + \" : \" + cc.audioEngine.getVolume(this.audioList[i]));\r\n\t\t\t\t\tlet newVolume = cc.audioEngine.getVolume(this.audioList[i]) * rate;\r\n\t\t\t\t\tif (newVolume < cc.audioEngine.getVolume(this.audioList[i]))\r\n\t\t\t\t\t\tcc.audioEngine.setVolume(this.audioList[i], newVolume);\r\n\t\t\t\t\tconsole.log(\"New volume \" + i + \" : \" + cc.audioEngine.getVolume(this.audioList[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t*/\r\n\t\r\n\tsetLimiterAuto: function ()\r\n\t{\r\n\t\tif (this.playingList.length > 0)\r\n\t\t{\r\n\t\t\tif (this.totalLimiter > -999)\r\n\t\t\t{\r\n\t\t\t\tlet totalMaxPCM = 0;\r\n\t\t\t\tlet numOfPlaying = 0;\r\n\t\t\t\tfor (let i = 0; i < this.playingList.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this.playingList[i].getAudio().paused && this.playingList[i].getAudio().currentTime > 0 && !this.playingList[i].isFading())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttotalMaxPCM += this.playingList[i].getMaxPCM();\r\n\t\t\t\t\t\tnumOfPlaying += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(\"Num of playing: \" + numOfPlaying);\r\n\t\t\t\tif (numOfPlaying == 0)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t// console.log(\"Total max PCM: \" + totalMaxPCM);\r\n\t\t\t\tlet totalDBFS = -999;\r\n\t\t\t\tif (totalMaxPCM != 0)\r\n\t\t\t\t\ttotalDBFS = 20 * Math.log10(totalMaxPCM * Math.sqrt(2));\r\n\t\t\t\t// console.log(\"Total dBFS: \" + totalDBFS);\r\n\t\t\t\tlet newVolume = 0;\r\n\t\t\t\tlet currentDBFS = totalDBFS - (numOfPlaying * 0.8);\r\n\t\t\t\tif (currentDBFS > this.totalLimiter)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (let i = 0; i < this.playingList.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (!this.playingList[i].getAudio().paused && this.playingList[i].getAudio().currentTime > 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnewVolume = this.playingList[i].getAudio().volume - this.limitRate;\r\n\t\t\t\t\t\t\tif (newVolume > 0)\r\n\t\t\t\t\t\t\t\tthis.playingList[i].getAudio().volume = newVolume;\r\n\t\t\t\t\t\t\t// console.log(\"Audio \" + i + \": \" + this.playingList[i].getAudio().volume);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// else if (currentDBFS < this.totalLimiter - 3)\r\n\t\t\t\t// {\r\n\t\t\t\t\t// for (let i = 0; i < this.playingList.length; i++)\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t\t// if (!this.playingList[i].getAudio().paused && this.playingList[i].getAudio().currentTime > 0)\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t\t// newVolume = this.playingList[i].getAudio().volume + this.limitRate / 2;\r\n\t\t\t\t\t\t\t// if (newVolume <= 1)\r\n\t\t\t\t\t\t\t\t// this.playingList[i].getAudio().volume = newVolume;\r\n\t\t\t\t\t\t\t// console.log(\"Audio \" + i + \": \" + this.playingList[i].getAudio().volume);\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t// }\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tfor (let i = 0; i < this.playingList.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this.playingList[i].getAudio().paused && this.playingList[i].getAudio().currentTime > 0 && !this.playingList[i].isFading())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet dBFS = 20 * Math.log10(this.playingList[i].getMaxPCM() * Math.sqrt(2)) - 0.8;\r\n\t\t\t\t\t\tif (dBFS > this.playingList[i].getLimitDBFS())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet newVolume = this.playingList[i].getAudio().volume -= this.limitRate;\r\n\t\t\t\t\t\t\tif (newVolume > 0)\r\n\t\t\t\t\t\t\t\tthis.playingList[i].getAudio().volume = newVolume;\r\n\t\t\t\t\t\t\t// console.log(\"Audio \" + i + \": \" + this.playingList[i].getAudio().volume);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// else if (dBFS < this.playingList[i].getLimitDBFS() - 3)\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t\t// let newVolume = this.playingList[i].getAudio().volume += this.limitRate / 2;\r\n\t\t\t\t\t\t\t// if (newVolume <= 1)\r\n\t\t\t\t\t\t\t\t// this.playingList[i].getAudio().volume = newVolume;\r\n\t\t\t\t\t\t\t// console.log(\"Audio \" + i + \": \" + this.playingList[i].getAudio().volume);\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} \r\n\t},\r\n\t\r\n\t// Customized audio playing function from original cocos engine to add limiter\r\n\t// Param:\r\n\t//\t\tclip: audio file (cc.AudioClip)\r\n\t//\t\tloop: looping (boolean)\r\n\t//\t\tvolume: audio volume to play (0.0 ~ 1.0)\r\n\t//\t\tvolume: audio volume to play (0.0 ~ 1.0)\r\n\t//\t\tthreshold: limited db (float)\r\n\tplay: function (clip, loop, volume, limitDBFS)\r\n\t{\r\n\t\tvar audioCtx = new AudioContext();\r\n\t\tvar url = clip.nativeUrl;\r\n\t\tvar audio = new Audio(url);\r\n\t\tvar processor = audioCtx.createScriptProcessor(2048, 1, 1);\r\n\t\tvar source;\r\n\r\n\t\taudio.addEventListener('canplaythrough', function(){\r\n\t\t\tif (source == undefined)\r\n\t\t\t{\r\n\t\t\t\tsource = audioCtx.createMediaElementSource(audio);\r\n\t\t\t\tsource.connect(processor);\r\n\t\t\t\tsource.connect(audioCtx.destination);\r\n\t\t\t\tprocessor.connect(audioCtx.destination);\r\n\t\t\t\taudio.loop = loop;\r\n\t\t\t}\r\n\t\t}, false);\r\n\t\t\r\n\t\taudio.volume = volume;\r\n\t\taudio.play();\r\n\t\t\r\n\t\tlet limiterAudio = new this.LimiterAudio();\r\n\t\tlimiterAudio.setId(this.playingList.length);\r\n\t\tlimiterAudio.setAudio(audio);\r\n\t\tlimiterAudio.setLimitDBFS(limitDBFS);\r\n\t\tthis.playingList.push(limiterAudio);\r\n\t\tlet str = this.getFormat(limiterAudio.getId());\r\n\r\n\t\t// loop through PCM data and calculate average\r\n\t\t// volume for a given 2048 sample buffer\r\n\t\tprocessor.onaudioprocess = function(evt){\r\n\t\tvar input = evt.inputBuffer.getChannelData(0)\r\n\t\t  , len = input.length   \r\n\t\t  // , total = i = 0\r\n\t\t  , aud = null\r\n\t\t  // , total = i = Math.abs(input[0])\r\n\t\t  , maxPCM = Math.abs(input[0]);\r\n\t\t  // , dBFS\r\n\t\t  // , limitRateDown = 0.01;\r\n\t\tif (aud == null)\r\n\t\t\taud = limiterAudio;\r\n\t\t// while ( i < len ) \r\n\t\t\t// total += Math.abs( input[i++] );\r\n\t\t// rms = Math.sqrt( total / len );\r\n\t\t// console.log(\"Total 1: \" + (total / len));\r\n\t\t// total = 0;\r\n\t\tfor (let i = 0; i < len; i++)\r\n\t\t\tif (Math.abs(input[i]) > maxPCM)\r\n\t\t\t\tmaxPCM = Math.abs(input[i]);\r\n\t\taud.setMaxPCM(maxPCM);\r\n\t\t// console.log(\"RMS : \" + rms);\r\n\t\t// dBFS = 20 * Math.log10(rms * Math.sqrt(2));\r\n\t\t// console.log(\"dBFS \" + aud.getId() + \": \" + dBFS);\r\n\t\t// console.log(\"Limit dBFS : \" + aud.getLimitDBFS());\r\n\t\t// if (dBFS > aud.getLimitDBFS() && aud.getAudio().volume - limitRateDown > 0)\r\n\t\t\t// aud.getAudio().volume -= limitRateDown;\r\n\t\t// console.log(\"Volume \" + aud.getId() + \": \" + aud.getAudio().volume);\r\n\t\t};\r\n\t\treturn limiterAudio.getId();\r\n\t\t// let limitedVolume =  this.limiter(clip, volume, threshold);\r\n\t\t// console.log(\"Limited Volume: \" + limitedVolume);\r\n\t\t// if (this.totalVolume == 0)\r\n\t\t// {\r\n\t\t\t// return cc.audioEngine.play(clip, loop, limitedVolume);\r\n\t\t// }\r\n\t\t// else\r\n\t\t// {\r\n\t\t\t// let id = cc.audioEngine.play(clip, loop, limitedVolume);\r\n\t\t\t// this.audioList.push(id);\r\n\t\t\t// return id;\r\n\t\t// }\r\n\t},\r\n\t\r\n\tpause: function (id)\r\n\t{\r\n\t\tthis.playingList[id].getAudio().pause();\r\n\t},\r\n\t\r\n\tuncacheAll: function ()\r\n\t{\r\n\t\tfor (let i = 0; i < this.playingList.length; i++)\r\n\t\t{\r\n\t\t\tthis.playingList[i].getAudio().pause();\r\n\t\t\tthis.playingList[i].getAudio().currentTime = 0;\r\n\t\t}\r\n\t\tthis.playingList = [];\r\n\t\tthis.seamlessAudioList = [];\r\n\t\tthis.fadeAudioList = [];\r\n\t},\r\n\t\r\n\t// Get format of audio file (mp3, ogg, wav)\r\n\t// Param:\r\n\t//\t\tclip: audio file (cc.AudioClip)\r\n\tgetFormat: function (id)\r\n\t{\r\n\t\tlet formatStr = this.playingList[id].getAudio().src;\r\n\t\treturn formatStr.substr(formatStr.length - 3, 3).toLowerCase();\r\n\t\t// return clip.nativeUrl.substr(clip.nativeUrl.length - 3, 3).toLowerCase();\r\n\t},\r\n\t\r\n\t// Init and add new instance of Seamless audio class to seamless loop list\r\n\t// Param:\r\n\t//\t\tid: id of the playing audio (integer)\r\n\t//\t\tstartBuffer: time to skip from the begining (milisecond)\r\n\t//\t\tendBuffer: time to trim from the end (milisecond)\r\n\tplaySeamlessAudio: function (id, startBuffer, endBuffer)\r\n\t{\r\n\t\tstartBuffer /= 1000;\r\n\t\tendBuffer /= 1000;\r\n\t\tlet audio = new this.SeamlessAudio();\r\n\t\taudio.setAudio(this.playingList[id].getAudio());\r\n\t\taudio.setStartBuffer(startBuffer);\r\n\t\taudio.setEndBuffer(endBuffer);\r\n\t\tthis.seamlessAudioList.push(audio);\r\n\t\tthis.playingList[id].currentTime = startBuffer;\r\n\t\t// cc.audioEngine.setCurrentTime(id, startBuffer);\r\n\t},\r\n\t\r\n\t// Control the timing of all the seamless loop audios\r\n\tseamlessProcess: function ()\r\n\t{\r\n\t\tfor (let i = 0; i < this.seamlessAudioList.length; i++)\r\n\t\t{\r\n\t\t\tif (this.seamlessAudioList[i].getAudio().loop\r\n\t\t\t\t&& !this.seamlessAudioList[i].getAudio().paused\r\n\t\t\t\t&& this.seamlessAudioList[i].getAudio().currentTime > this.seamlessAudioList[i].getAudio().duration - this.seamlessAudioList[i].getEndBuffer()\r\n\t\t\t\t)\r\n\t\t\t{\r\n\t\t\t\tthis.seamlessAudioList[i].getAudio().currentTime = this.seamlessAudioList[i].getStartBuffer();\r\n\t\t\t\t// console.log(\"Looped\");\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t// Init and add new instance of FadeAudio class to fading audio list\r\n\t// Param:\r\n\t//\t\tid: id of the playing audio (integer)\r\n\t//\t\tstartVolume: starting volume of the audio from the begining of fading (0.0 ~ 1.0)\r\n\t//\t\tendVolume: final volume of the audio at the end of fading (0.0 ~ 1.0)\r\n\t// \t\trequiredTime: desired time to reach the final volume (milisecond)\r\n\tplayFadeAudio: function (id, startVolume, endVolume, requiredTime)\r\n\t{\r\n\t\tif (this.fps > 0)\r\n\t\t{\r\n\t\t\t// cc.audioEngine.setVolume(id, startVolume);\r\n\t\t\tthis.playingList[id].setFading(true);\r\n\t\t\tthis.playingList[id].getAudio().volume = startVolume;\r\n\t\t\tlet audio = new this.FadeAudio();\r\n\t\t\taudio.setAudio(this.playingList[id]);\r\n\t\t\taudio.setEndVolume(endVolume);\r\n\t\t\taudio.setFadeCheckTime(new Date().getTime());\r\n\t\t\tlet remainingTime = (audio.getAudioSrc().duration - audio.getAudioSrc().currentTime) * 1000;\r\n\t\t\tif (!this.playingList[id].getAudio().loop && (requiredTime == 0 || remainingTime < requiredTime))\r\n\t\t\t\trequiredTime = remainingTime;\t\t\r\n\t\t\taudio.setEndTime(audio.getFadeCheckTime() + requiredTime);\r\n\t\t\tthis.updateFadeRate(audio);\r\n\t\t\tthis.fadeAudioList.push(audio);\r\n\t\t}\r\n\t},\r\n\t\r\n\t// Calculate the volume changing rate of each frame based on fps and remaining required time\r\n\t// Param:\r\n\t//\t\taudio: audio file (cc.AudioClip)\r\n\tupdateFadeRate: function (audio)\r\n\t{\r\n\t\tlet remainTime = audio.getEndTime() - (new Date()).getTime();\r\n\t\tlet totalFrame = (remainTime/ 1000) * this.fps;\r\n\t\tlet volumeGap = audio.getEndVolume() - audio.getAudioSrc().volume;\r\n\t\taudio.setFadeRate(volumeGap / totalFrame);\r\n\t},\r\n\t\r\n\t// Control the volume of all audios in fading process\r\n\tfadeProcess: function ()\r\n\t{\r\n\t\tfor (let i = 0; i < this.fadeAudioList.length; i++)\r\n\t\t{\r\n\t\t\tif (this.fadeAudioList[i].getAudioSrc().volume != this.fadeAudioList[i].getEndVolume())\r\n\t\t\t{\r\n\t\t\t\t// if (this.fadeAudioList[i].getFadeRate() > 0)\r\n\t\t\t\t// {\r\n\t\t\t\t\t// if (this.fadeAudioList[i].getAudio().volume > this.fadeAudioList[i].getEndVolume())\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t\t// this.fadeAudioList[i].getAudio().volume = this.fadeAudioList[i].getEndVolume();\r\n\t\t\t\t\t\t// continue;\r\n\t\t\t\t\t// }\r\n\t\t\t\t// }\r\n\t\t\t\t// else if (this.fadeAudioList[i].getFadeRate() < 0)\r\n\t\t\t\t// {\r\n\t\t\t\t\t// if (this.fadeAudioList[i].getAudio().volume < this.fadeAudioList[i].getEndVolume())\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t\t// this.fadeAudioList[i].getAudio().volume = this.fadeAudioList[i].getEndVolume();\r\n\t\t\t\t\t\t// continue;\r\n\t\t\t\t\t// }\r\n\t\t\t\t// }\r\n\t\t\t\tthis.updateFadeRate(this.fadeAudioList[i]);\r\n\t\t\t\tlet newVolume = this.fadeAudioList[i].getAudioSrc().volume + this.fadeAudioList[i].getFadeRate();\r\n\t\t\t\tif (this.fadeAudioList[i].getFadeRate() > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (newVolume > this.fadeAudioList[i].getEndVolume())\r\n\t\t\t\t\t\tnewVolume = this.fadeAudioList[i].getEndVolume();\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.fadeAudioList[i].getFadeRate() < 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (newVolume < this.fadeAudioList[i].getEndVolume())\r\n\t\t\t\t\t\tnewVolume = this.fadeAudioList[i].getEndVolume();\r\n\t\t\t\t}\r\n\t\t\t\tthis.fadeAudioList[i].getAudioSrc().volume = newVolume;\r\n\t\t\t\tconsole.log(\"Volume at \" + ((new Date()).getTime() - this.fadeAudioList[i].getFadeCheckTime()) + \" \" + this.fadeAudioList[i].getAudioSrc().volume);\r\n\t\t\t\tif (this.fadeAudioList[i].getAudioSrc().volume == this.fadeAudioList[i].getEndVolume())\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.fadeAudioList[i].getAudio().setFading(false);\r\n\t\t\t\t\tthis.fadeAudioList.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t\t// cc.audioEngine.setVolume(this.fadeAudioList[i].getId(), cc.audioEngine.getVolume(this.fadeAudioList[i].getId()) + this.fadeAudioList[i].getFadeRate());\r\n\t\t\t}\r\n\t\t}\r\n\t\t// For demo\r\n\t\tif (this.fadeAudioList.length > 0)\r\n\t\t{\r\n\t\t\tif (this.fade == \"in\")\r\n\t\t\t{\r\n\t\t\t\tthis.audioTestDisplay.string = \"Fade in in \" + Math.round(this.idleTime(this.id, 20000, 0) / 1000) + \" secs\";\r\n\t\t\t}\r\n\t\t\telse if (this.fade == \"out\")\r\n\t\t\t{\r\n\t\t\t\tthis.audioTestDisplay.string = \"Fade out in \" + Math.round(this.idleTime(this.id, 15000, 0) / 1000) + \" secs\";\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t// Get fps\r\n\tgetFPS: function ()\r\n\t{\r\n\t\tif ((new Date()).getTime() - this.startTime >= 1000)\r\n\t\t{\r\n\t\t\tthis.fps = this.frameCount;\r\n\t\t\tthis.frameCount = 0;\r\n\t\t\tthis.startTime = (new Date()).getTime();\r\n\t\t\t// console.log(\"FPS: \" + this.fps);\r\n\t\t}\r\n\t\tthis.frameCount += 1;\r\n\t},\r\n\t\r\n\t// Convert marker to specific time within audio duration\r\n\t// Param:\r\n\t//\t\tmarker: desired time to play the audio with format \"hh:mm:ss:SSS\" \r\n\tmarkerToTimeInSec: function (marker)\r\n\t{\r\n\t\tlet timeArray = marker.split(\":\");\r\n\t\tlet hour = 0;\r\n\t\tlet min = 0;\r\n\t\tlet sec = 0;\r\n\t\tlet milSec = 0;\r\n\t\tif (timeArray.length == 4)\r\n\t\t{\r\n\t\t\thour = parseInt(timeArray[0]);\r\n\t\t\tmin = parseInt(timeArray[1]);\r\n\t\t\tsec = parseInt(timeArray[2]);\r\n\t\t\tmilSec = parseInt(timeArray[3]);\r\n\t\t}\r\n\t\telse if (timeArray.length == 3)\r\n\t\t{\r\n\t\t\tmin = parseInt(timeArray[0]);\r\n\t\t\tsec = parseInt(timeArray[1]);\r\n\t\t\tmilSec = parseInt(timeArray[2]);\r\n\t\t}\r\n\t\telse if (timeArray.length == 2)\r\n\t\t{\r\n\t\t\tsec = parseInt(timeArray[0]);\r\n\t\t\tmilSec = parseInt(timeArray[1]);\r\n\t\t}\r\n\t\telse if (timeArray.length == 1)\r\n\t\t{\r\n\t\t\tmilSec = parseInt(timeArray[0]);\r\n\t\t}\r\n\t\tlet totalSec = hour * 3600 + min * 60 + sec + (milSec / 1000);\r\n\t\treturn totalSec;\r\n\t},\r\n\t\r\n\t// Play the audio at desired time with marker\r\n\t// Param:\r\n\t//\t\tmarker: desired time to play the audio with format \"hh:mm:ss:SSS\"\r\n\tplayAtMarker: function (id, marker)\r\n\t{\r\n\t\tthis.playingList[id].getAudio().currentTime = this.markerToTimeInSec(marker);\r\n\t\t// cc.audioEngine.setCurrentTime(id, this.markerToTimeInSec(marker));\r\n\t},\r\n\t\r\n\tgetCurrentTimeMarker: function (id)\r\n\t{\r\n\t\tlet currentTime = this.playingList[id].getAudio().currentTime;\r\n\t\treturn this.timeInSecToMarker(currentTime);\r\n\t},\r\n\t\r\n\ttimeInSecToMarker: function (currentTime)\r\n\t{\r\n\t\tlet hour = Math.floor(currentTime / 3600);\r\n\t\t// console.log(\"hour \" + hour);\r\n\t\tlet min = Math.floor(currentTime / 60);\r\n\t\tif (min > 59)\r\n\t\t\tmin = 59;\r\n\t\t// console.log(\"min \" + min);\r\n\t\tlet sec = Math.floor(currentTime - hour * 3600 - min * 60);\r\n\t\t//console.log(\"sec \" + sec);\r\n\t\tlet milSec = currentTime - Math.floor(currentTime);\r\n\t\t// console.log(\"milsec \" + milSec);\r\n\t\tmilSec *= 1000;\r\n\t\tif (milSec > 999)\r\n\t\t\tmilSec = 999;\r\n\t\tlet marker = \"\" + hour + \":\" + min + \":\" + sec + \":\" + Math.round(milSec);\r\n\t\treturn marker;\r\n\t},\r\n\t\r\n\tnormal_loop: function ()\r\n\t{\r\n\t\tthis.fade = \"\";\r\n\t\tthis.markerTest = false;\r\n\t\tthis.scenario= \"\";\r\n\t\tthis.totalVolume = 0;\r\n\t\tif (this.playingList.length > 0)\r\n\t\t{\r\n\t\t\tthis.uncacheAll();\r\n\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.id = this.play(self.clip_2, true, 1, 0);\r\n\t\tthis.playSeamlessAudio(this.id, 0, 0);\r\n\t\tconsole.log(\"Normal loop\");\r\n\t\tthis.audioTestDisplay.string = \"Normal loop\";\r\n\t},\r\n\t\r\n\tseamless_loop: function ()\r\n\t{\r\n\t\tthis.fade = \"\";\r\n\t\tthis.markerTest = false;\r\n\t\tthis.scenario= \"\";\r\n\t\tthis.totalVolume = 0;\r\n\t\tif (this.playingList.length > 0)\r\n\t\t{\r\n\t\t\tthis.uncacheAll();\r\n\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.id = this.play(self.clip_2, true, 1, 0);\r\n\t\tthis.playSeamlessAudio(this.id, 50, 50);\r\n\t\tconsole.log(\"Seamless loop\");\r\n\t\tthis.audioTestDisplay.string = \"Seamless loop\";\r\n\t},\r\n\t\r\n\tcurrent_marker: function ()\r\n\t{\r\n\t\tthis.fade = \"\";\r\n\t\tthis.totalVolume = 0;\r\n\t\tthis.scenario= \"\";\r\n\t\tif (!this.markerTest)\r\n\t\t{\r\n\t\t\tif (this.playingList.length > 0)\r\n\t\t\t{\r\n\t\t\t\tthis.uncacheAll();\r\n\t\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.id = this.play(self.clip_1, true, 1, -2);\r\n\t\t\tlet currentTime = this.getCurrentTimeMarker(this.id);\r\n\t\t\tconsole.log(\"Playing at \" + currentTime);\r\n\t\t\tthis.audioTestDisplay.string = \"Playing at \" + currentTime;\r\n\t\t\tthis.markerTest = true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlet currentTime = this.getCurrentTimeMarker(this.id);\r\n\t\t\tconsole.log(\"Playing at \" + currentTime);\r\n\t\t\tthis.audioTestDisplay.string = \"Playing at \" + currentTime;\r\n\t\t}\r\n\t},\r\n\t\r\n\tfade_in: function ()\r\n\t{\r\n\t\tthis.fade = \"in\";\r\n\t\tthis.markerTest = false;\r\n\t\tthis.scenario= \"\";\r\n\t\tthis.totalVolume = 0;\r\n\t\tif (this.playingList.length > 0)\r\n\t\t{\r\n\t\t\tthis.uncacheAll();\r\n\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.id = this.play(self.clip_1, true, 1, 0);\r\n\t\tthis.playFadeAudio(this.id, 0, 1, 20000);\r\n\t\tthis.gameCallMarker = (new Date()).getTime();\r\n\t\tconsole.log(\"Fade in\");\r\n\t},\r\n\t\r\n\tfade_out: function ()\r\n\t{\r\n\t\tthis.fade = \"out\";\r\n\t\tthis.markerTest = false;\r\n\t\tthis.scenario= \"\";\r\n\t\tthis.totalVolume = 0;\r\n\t\tif (this.playingList.length > 0)\r\n\t\t{\r\n\t\t\tthis.uncacheAll();\r\n\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.id = this.play(self.clip_1, true, 1, 0);\r\n\t\tthis.playFadeAudio(this.id, 1, 0, 15000);\r\n\t\tthis.gameCallMarker = (new Date()).getTime();\r\n\t\tconsole.log(\"Fade out\");\r\n\t},\r\n\t\r\n\tlimiter_negative_5_dBFS: function ()\r\n\t{\r\n\t\tthis.fade = \"\";\r\n\t\tthis.markerTest = false;\r\n\t\tthis.scenario= \"\";\r\n\t\tif (this.playingList.length > 0)\r\n\t\t{\r\n\t\t\tthis.uncacheAll();\r\n\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setTotalLimiter(-5);\t\t\r\n\t\tthis.play(self.clip_1, true, 1, 0);\r\n\t\tthis.play(self.clip_2, true, 1, 0);\r\n\t\tthis.playAtMarker(this.play(self.clip_3, true, 1, 0), \"0:2:5:50\");\r\n\t\tthis.playAtMarker(this.play(self.clip_4, true, 1, 0), \"0:0:55:50\");\r\n\t\tthis.playAtMarker(this.play(self.clip_1, true, 1, 0), \"0:0:55:50\");\r\n\t\tconsole.log(\"Limiter at -5 dBFS\");\r\n\t\tthis.audioTestDisplay.string = \"Limiter at -5 dBFS\";\r\n\t},\r\n\t\r\n\tlimiter_negative_2_dBFS: function ()\r\n\t{\r\n\t\tthis.fade = \"\";\r\n\t\tthis.markerTest = false;\r\n\t\tthis.scenario= \"\";\r\n\t\tif (this.playingList.length > 0)\r\n\t\t{\r\n\t\t\tthis.uncacheAll();\r\n\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setTotalLimiter(-2);\t\t\r\n\t\tthis.play(self.clip_1, true, 1, 0);\r\n\t\tthis.play(self.clip_2, true, 1, 0);\r\n\t\tthis.playAtMarker(this.play(self.clip_3, true, 1, 0), \"0:2:5:50\");\r\n\t\tthis.playAtMarker(this.play(self.clip_4, true, 1, 0), \"0:0:55:50\");\r\n\t\tthis.playAtMarker(this.play(self.clip_1, true, 1, 0), \"0:0:55:50\");\r\n\t\tconsole.log(\"Limiter at -5 dBFS\");\r\n\t\tthis.audioTestDisplay.string = \"Limiter at -2 dBFS\";\r\n\t},\r\n\t\r\n\tlimiter_0_dBFS: function ()\r\n\t{\r\n\t\tthis.fade = \"\";\r\n\t\tthis.markerTest = false;\r\n\t\tthis.scenario= \"\";\r\n\t\tif (this.playingList.length > 0)\r\n\t\t{\r\n\t\t\tthis.uncacheAll();\r\n\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setTotalLimiter(0);\t\t\r\n\t\tthis.play(self.clip_1, true, 1, 0);\r\n\t\tthis.play(self.clip_2, true, 1, 0);\r\n\t\tthis.playAtMarker(this.play(self.clip_3, true, 1, 0), \"0:2:5:50\");\r\n\t\tthis.playAtMarker(this.play(self.clip_4, true, 1, 0), \"0:0:55:50\");\r\n\t\tthis.playAtMarker(this.play(self.clip_1, true, 1, 0), \"0:0:55:50\");\r\n\t\tconsole.log(\"Limiter at 0 dBFS\");\r\n\t\tthis.audioTestDisplay.string = \"Limiter at 0 dBFS\";\r\n\t},\r\n\t\r\n\tscenario_A_trigger: function ()\r\n\t{\r\n\t\tthis.fade = \"\";\r\n\t\tthis.markerTest = false;\r\n\t\tthis.totalVolume = 0;\r\n\t\tif (this.scenario != \"A\")\r\n\t\t{\r\n\t\t\tthis.step = -1;\r\n\t\t}\r\n\t\tthis.scenario = \"A\";\r\n\t\tif (this.step < 0 || this.step == 5)\r\n\t\t{\t\r\n\t\t\tif (this.playingList.length > 0)\r\n\t\t\t{\r\n\t\t\t\tthis.uncacheAll();\r\n\t\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.step = 0;\r\n\t\t}\r\n\t\telse if (this.step == 2)\r\n\t\t{\r\n\t\t\t// this.gameCallMarker = (new Date()).getTime();\r\n\t\t\tthis.gameCallMarker = this.getCurrentTimeMarker(this.id);\r\n\t\t\tthis.nextBeatInMilSec = this.displayNextBeat = this.getNextBeatInMilSec(this.id, this.gameCallMarker, 444.444, 1);\r\n\t\t\tthis.step += 1;\r\n\t\t}\r\n\t},\r\n\t\r\n\tscenario_B_trigger: function ()\r\n\t{\r\n\t\tthis.fade = \"\";\r\n\t\tthis.markerTest = false;\r\n\t\tthis.totalVolume = 0;\r\n\t\tif (this.scenario != \"B\")\r\n\t\t{\r\n\t\t\tthis.step = -1;\r\n\t\t}\r\n\t\tthis.scenario = \"B\";\r\n\t\tif (this.step < 0 || this.step == 5)\r\n\t\t{\t\r\n\t\t\tif (this.playingList.length > 0)\r\n\t\t\t{\r\n\t\t\t\tthis.uncacheAll();\r\n\t\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.step = 0;\r\n\t\t\tthis.nextBeatInMilSec = 0;\r\n\t\t}\r\n\t\telse if (this.step == 2)\r\n\t\t{\r\n\t\t\t// cc.audioEngine.stop(this.preId);\r\n\t\t\tthis.pause(this.preId);\r\n\t\t\t// this.gameCallMarker = (new Date()).getTime();\r\n\t\t\tthis.gameCallMarker = this.getCurrentTimeMarker(this.id);\r\n\t\t\tthis.nextBeatInMilSec = this.displayNextBeat = this.getNextBeatInMilSec(this.id, this.gameCallMarker, 444.444, 1);\r\n\t\t\tthis.step += 1;\r\n\t\t}\r\n\t},\r\n\t\r\n\tscenario_C_trigger: function ()\r\n\t{\r\n\t\tthis.fade = \"\";\r\n\t\tthis.markerTest = false;\r\n\t\tthis.totalVolume = 0;\r\n\t\tif (this.scenario != \"C\")\r\n\t\t{\r\n\t\t\tthis.step = -1;\r\n\t\t}\r\n\t\tthis.scenario = \"C\";\r\n\t\tif (this.step < 0 || this.step == 4)\r\n\t\t{\r\n\t\t\tif (this.playingList.length > 0)\r\n\t\t\t{\r\n\t\t\t\tthis.uncacheAll();\r\n\t\t\t\tthis.audioTestDisplay.string = \"Uncached all\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.step = 0;\r\n\t\t}\r\n\t\telse if (this.step == 1)\r\n\t\t{\r\n\t\t\tthis.gameCallMarker = this.getCurrentTimeMarker(this.id);\r\n\t\t\t// this.nextBeatInMilSec = this.displayNextBeat = this.getNextBeatInMilSec(this.id, this.gameCallMarker, 444.444, 2);\r\n\t\t\tthis.nextBeatInMilSec = this.displayNextBeat = this.getNextBeatWithAlign(this.id, this.gameCallMarker, \"0:0:0:573\", 444.444);\r\n\t\t\tthis.nextBeatAfterGCInMilSec = this.getNextBeatInMilSec(this.id, this.gameCallMarker, 444.444, 1);\r\n\t\t\tthis.triggerPoint = this.nextBeatInMilSec - 573;\r\n\t\t\tthis.step += 1;\r\n\t\t}\r\n\t},\r\n\t\r\n\tonKeyDown (event) {\r\n        // set a flag when key pressed\r\n        switch(event.keyCode) {\r\n\t\t\tcase cc.macro.KEY.q:\r\n\t\t\t\tthis.normal_loop();\r\n                break;\r\n\t\t\tcase cc.macro.KEY.w:\r\n\t\t\t\tthis.seamless_loop();\r\n                break;\r\n\t\t\tcase cc.macro.KEY.e:\r\n\t\t\t\tthis.fade_in();\r\n                break;\r\n\t\t\tcase cc.macro.KEY.r:\r\n\t\t\t\tthis.fade_out();\r\n                break;\r\n\t\t\tcase cc.macro.KEY.t:\r\n\t\t\t\tthis.limiter_negative_5_dBFS();\r\n                break;\r\n\t\t\tcase cc.macro.KEY.y:\r\n\t\t\t\tthis.limiter_0_dBFS();\r\n                break;\r\n\t\t\tcase cc.macro.KEY.u:\r\n\t\t\t\tthis.limiter_negative_2_dBFS();\r\n                break;\r\n\t\t\tcase cc.macro.KEY.i:\r\n\t\t\t\tthis.current_marker();\r\n\t\t\t\tbreak;\r\n\t\t\tcase cc.macro.KEY.o:\r\n\t\t\t\tthis.scenario_A_trigger();\r\n\t\t\t\tbreak;\r\n\t\t\tcase cc.macro.KEY.p:\r\n\t\t\t\tthis.scenario_B_trigger();\r\n\t\t\t\tbreak;\r\n\t\t\tcase cc.macro.KEY.l:\r\n\t\t\t\tthis.scenario_C_trigger();\r\n\t\t\t\tbreak;\r\n        }\r\n    },\r\n\t\r\n\tcompareTime: function (time_1_milsec, time_2_milsec, limitGap)\r\n\t{\r\n\t\t// console.log(\"Current time: \" + time_1_milsec);\r\n\t\t// console.log(\"End time: \" + time_2_milsec);\r\n\t\treturn (time_2_milsec - time_1_milsec) < limitGap;\r\n\t},\r\n\t\r\n\tgetNextBeatInMilSec: function (id, currentMarker, gapOfBeats, numOfNextBeat)\r\n\t{\r\n\t\tlet durationInMilSec = this.playingList[id].getAudio().duration * 1000;\r\n\t\t// console.log(\"Duration: \" + durationInMilSec);\r\n\t\tlet timeInMilSec = this.markerToTimeInSec(currentMarker) * 1000;\r\n\t\tif (this.compareTime(timeInMilSec, durationInMilSec, 100))\r\n\t\t\ttimeInMilSec -= 100;\r\n\t\t// console.log(\"Current Beat: \" + (timeInMilSec / 1000));\r\n\t\tlet numOfPassedBeats = Math.floor(timeInMilSec / gapOfBeats);\r\n\t\tlet totalBeats = Math.ceil(durationInMilSec / gapOfBeats);\r\n\t\tlet diff = totalBeats - numOfPassedBeats - numOfNextBeat;\r\n\t\tlet nextBeatInMilSec = 0;\r\n\t\tif (diff == 0)\r\n\t\t\treturn durationInMilSec;\r\n\t\telse if (diff > 0)\r\n\t\t\tnextBeatInMilSec = gapOfBeats * (numOfPassedBeats + numOfNextBeat);\r\n\t\telse\r\n\t\t\tnextBeatInMilSec = gapOfBeats * diff;\r\n\t\t// console.log(\"Next beat: \" + nextBeatInMilSec);\r\n\t\t\r\n\t\t// console.log(\"Next Beat: \" + nextBeatInMilSec);\r\n\t\t// if (this.compareTime(nextBeatInMilSec, durationInMilSec, 100))\r\n\t\t\t// if (numOfNextBeat == 1)\r\n\t\t\t\t// return durationInMilSec;\r\n\t\t\t// else\r\n\t\t\t// {\r\n\t\t\t\t// numOfPassedBeats = Math.ceil(Math.abs(nextBeatInMilSec - durationInMilSec) / gapOfBeats);\r\n\t\t\t// }\r\n\t\treturn nextBeatInMilSec;\r\n\t},\r\n\t\r\n\tgetNextBeatWithAlign: function (id, currentMarker, alignMarker, gapOfBeats)\r\n\t{\r\n\t\tlet nextBeatInMilSec = this.getNextBeatInMilSec(id, currentMarker, gapOfBeats, 1);\r\n\t\tlet alignTimeInMilSec = this.markerToTimeInSec(alignMarker) * 1000;\r\n\t\tlet currentTimeInMilSec = this.markerToTimeInSec(currentMarker) * 1000;\r\n\t\tif (alignTimeInMilSec > gapOfBeats)\r\n\t\t\twhile (nextBeatInMilSec - alignTimeInMilSec < currentTimeInMilSec)\r\n\t\t\t\tnextBeatInMilSec += gapOfBeats;\r\n\t\t// console.log(\"Next beat with alignment: \" + nextBeatInMilSec);\r\n\t\treturn nextBeatInMilSec\r\n\t},\r\n\t\r\n\tidleTime: function (id, endTimeInMilSec, limitGap)\r\n\t{\r\n\t\t// console.log(\"Game call in milsec: \" + (this.markerToTimeInSec(this.gameCallMarker) * 1000));\r\n\t\t// console.log(\"Next beat in milsec: \" + this.nextBeatInMilSec);\r\n\t\t// console.log(\"Current time: \" + (this.playingList[id].getAudio().currentTime * 1000));\r\n\t\tlet timeGapInMilSec = endTimeInMilSec - (this.playingList[id].getAudio().currentTime * 1000);\r\n\t\t// console.log(\"Time gap in milsec: \" + timeGapInMilSec);\r\n\t\tif (timeGapInMilSec <= limitGap)\r\n\t\t\tthis.nextBeatInMilSec = 0;\r\n\t\tif (timeGapInMilSec < 0)\r\n\t\t\ttimeGapInMilSec = 0;\r\n\t\treturn timeGapInMilSec;\r\n\t},\r\n\t\r\n\tscenarioA: function ()\r\n\t{\r\n\t\tif (this.scenario == \"A\")\r\n\t\t{\r\n\t\t\tif (this.step == 0)\r\n\t\t\t{\r\n\t\t\t\tthis.nextBeatInMilSec = 0;\r\n\t\t\t\tthis.id = this.play(self.Intro_A, false, 1, 0);\r\n\t\t\t\tthis.preId = this.id;\r\n\t\t\t\tthis.step += 1;\r\n\t\t\t}\r\n\t\t\telse if (this.step == 1)\r\n\t\t\t{\r\n\t\t\t\tthis.checkMarker = this.getCurrentTimeMarker(this.id);\r\n\t\t\t\tif (this.compareTime(this.markerToTimeInSec(this.checkMarker) * 1000, this.playingList[this.id].getAudio().duration * 1000, 120))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.pause(this.id);\r\n\t\t\t\t\tthis.id = this.play(self.Loop, true, 1, 0);\r\n\t\t\t\t\tthis.playSeamlessAudio(this.id, 0, 50);\r\n\t\t\t\t\tthis.step += 1;\r\n\t\t\t\t}\r\n\t\t\t\tthis.audioTestDisplay.string = \"Scenario A: Intro A at \" + this.getCurrentTimeMarker(this.id);\r\n\t\t\t}\r\n\t\t\telse if (this.step == 2)\r\n\t\t\t{\r\n\t\t\t\tthis.checkMarker = this.getCurrentTimeMarker(this.id);\r\n\t\t\t\tthis.audioTestDisplay.string = \"Scenario A: Loop at \" + this.checkMarker;\r\n\t\t\t}\r\n\t\t\telse if (this.step == 3)\r\n\t\t\t{\r\n\t\t\t\tif (this.nextBeatInMilSec > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Scenario A: Loop at \" + this.getCurrentTimeMarker(this.id) + \"\\n\" \r\n\t\t\t\t\t+ \"Game call detected at \" + this.gameCallMarker + \" and Outro A triggers on next beat \" + this.timeInSecToMarker(this.nextBeatInMilSec / 1000) + \"\\n\"\r\n\t\t\t\t\t+ \"Waiting until next beat after \" + this.idleTime(this.id, this.nextBeatInMilSec, 50)  + \" secs\";\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.pause(this.id);\r\n\t\t\t\t\tthis.id = this.play(self.Outro_A, false, 1, 0);\r\n\t\t\t\t\tthis.playingList[this.id].getAudio().currentTime = 0.04;\r\n\t\t\t\t\tthis.step += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (this.step == 4)\r\n\t\t\t{\r\n\t\t\t\tthis.audioTestDisplay.string = \"Scenario A: Outro A at \" + this.getCurrentTimeMarker(this.id) + \"\\n\"\r\n\t\t\t\t+ \"Game call detected at \" + this.gameCallMarker + \" and Outro A triggered on next beat \" + this.timeInSecToMarker(this.displayNextBeat / 1000);\r\n\t\t\t\tif (this.playingList[this.id].getAudio().paused && this.playingList[this.id].getAudio().currentTime >= this.playingList[this.id].getAudio().duration)\r\n\t\t\t\t\tthis.step += 1;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tscenarioB: function ()\r\n\t{\r\n\t\tif (this.scenario == \"B\")\r\n\t\t{\r\n\t\t\tif (this.step == 0)\r\n\t\t\t{\r\n\t\t\t\tthis.nextBeatInMilSec = 0;\r\n\t\t\t\tthis.id = this.play(self.Intro_B, false, 1, 0);\r\n\t\t\t\tthis.step += 1;\r\n\t\t\t}\r\n\t\t\telse if (this.step == 1)\r\n\t\t\t{\r\n\t\t\t\tif (this.nextBeatInMilSec == 0)\r\n\t\t\t\t\tthis.nextBeatInMilSec = this.getNextBeatInMilSec(this.id, \"0:0:0:1\", 573, 1);\r\n\t\t\t\tif (this.compareTime(this.playingList[this.id].getAudio().currentTime * 1000, this.nextBeatInMilSec, 120))\r\n\t\t\t\t// if (this.playingList[this.id].getAudio().currentTime * 1000 >= this.nextBeatInMilSec)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.preId = this.id;\r\n\t\t\t\t\tthis.id = this.play(self.Loop, true, 1, 0);\r\n\t\t\t\t\tthis.playSeamlessAudio(this.id, 0, 50);\r\n\t\t\t\t\tthis.nextBeatInMilSec = 0;\r\n\t\t\t\t\tthis.step += 1;\r\n\t\t\t\t}\r\n\t\t\t\tthis.audioTestDisplay.string = \"Scenario B: Intro B at \" + this.getCurrentTimeMarker(this.id) + \"\\n\" + \"Loop triggers on next beat \" + this.timeInSecToMarker(this.nextBeatInMilSec / 1000);\r\n\t\t\t}\r\n\t\t\telse if (this.step == 2)\r\n\t\t\t{\r\n\t\t\t\tthis.checkMarker = this.getCurrentTimeMarker(this.id);\r\n\t\t\t\tif (!this.compareTime(this.playingList[this.preId].getAudio().currentTime * 1000, this.playingList[this.preId].getAudio().duration * 1000, 0.5))\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Scenario B: Intro B at \" + this.getCurrentTimeMarker(this.preId) + \"\\n\" + \"Loop at \" + this.checkMarker;\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Scenario B: Loop at \" + this.checkMarker;\r\n\t\t\t}\r\n\t\t\telse if (this.step == 3)\r\n\t\t\t{\r\n\t\t\t\tif (this.nextBeatInMilSec > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Scenario A: Loop at \" + this.getCurrentTimeMarker(this.id) + \"\\n\" \r\n\t\t\t\t\t+ \"Game call detected at \" + this.gameCallMarker + \" and Outro B triggers on next beat \" + this.timeInSecToMarker(this.nextBeatInMilSec / 1000) + \"\\n\"\r\n\t\t\t\t\t+ \"Waiting until next beat after \" + this.idleTime(this.id, this.nextBeatInMilSec, 50)  + \" secs\";\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.preId = this.id;\t\t\t\t\r\n\t\t\t\t\tthis.id = this.play(self.Outro_B_Test, false, 1, 0);\r\n\t\t\t\t\tthis.playFadeAudio(this.preId, this.playingList[this.preId].getAudio().volume, 0, 888);\r\n\t\t\t\t\tthis.step += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (this.step == 4)\r\n\t\t\t{\r\n\t\t\t\tif (this.playingList[this.preId].getAudio().volume > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Scenario B: Loop at \" + this.getCurrentTimeMarker(this.preId) + \" fading out until marker (0:0:0:888) of Outro B\\n\" \r\n\t\t\t\t\t+ \"Scenario B: Outro B at \" + this.getCurrentTimeMarker(this.id) + \"\\n\"\r\n\t\t\t\t\t+ \"Game call detected at \" + this.gameCallMarker + \" and Outro B triggered on next beat \" + this.timeInSecToMarker(this.displayNextBeat / 1000);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this.playingList[this.preId].getAudio().paused)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.pause(this.preId);\r\n\t\t\t\t\t\tthis.playingList[this.preId].getAudio().currentTime = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Loop finished fading out at marker (0:0:0:888)\\n\"\r\n\t\t\t\t\t+ \"Scenario B: Outro B at \" + this.getCurrentTimeMarker(this.id) + \"\\n\"\r\n\t\t\t\t\t+ \"Game call detected at \" + this.gameCallMarker + \" and Outro B triggered on next beat \" + this.timeInSecToMarker(this.displayNextBeat / 1000);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.playingList[this.id].getAudio().paused && this.playingList[this.id].getAudio().currentTime >= this.playingList[this.id].getAudio().duration)\r\n\t\t\t\t\tthis.step += 1;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tscenarioC: function ()\r\n\t{\r\n\t\tif (this.scenario == \"C\")\r\n\t\t{\r\n\t\t\tif (this.step == 0)\r\n\t\t\t{\r\n\t\t\t\tthis.nextBeatInMilSec = 0;\r\n\t\t\t\tthis.id = this.play(self.Loop, true, 1, 0);\r\n\t\t\t\tthis.playSeamlessAudio(this.id, 0, 50);\r\n\t\t\t\tthis.step += 1;\r\n\t\t\t}\r\n\t\t\telse if (this.step == 1)\r\n\t\t\t{\r\n\t\t\t\tthis.audioTestDisplay.string = \"Scenario C: Loop at \" + this.getCurrentTimeMarker(this.id);\r\n\t\t\t}\r\n\t\t\telse if (this.step == 2)\r\n\t\t\t{\r\n\t\t\t\tif (this.nextBeatInMilSec > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Scenario C: Loop at \" + this.getCurrentTimeMarker(this.id) + \"\\n\" \r\n\t\t\t\t\t+ \"Game call detected at \" + this.gameCallMarker + \" and Outro C triggers at \" + this.timeInSecToMarker(this.triggerPoint / 1000) + \"\\n\"\r\n\t\t\t\t\t+ \"Waiting until Outro C triggers after \" + this.idleTime(this.id, this.triggerPoint, 50)  + \" secs\";\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.preId = this.id;\r\n\t\t\t\t\tthis.id = this.play(self.Outro_C_Test, false, 1, 0);\r\n\t\t\t\t\tthis.playFadeAudio(this.preId, this.playingList[this.preId].getAudio().volume, 0, 573);\r\n\t\t\t\t\tthis.step += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (this.step == 3)\r\n\t\t\t{\r\n\t\t\t\tif (this.playingList[this.preId].getAudio().volume > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Scenario C: Loop at \" + this.getCurrentTimeMarker(this.preId) \r\n\t\t\t\t\t+ \" fading out until next \" + (Math.round((this.displayNextBeat - this.nextBeatAfterGCInMilSec) / 444.444) + 1) + \" beat(s) \" + this.timeInSecToMarker(this.displayNextBeat / 1000) \r\n\t\t\t\t\t+ \"\\n\" + \"Scenario C: Outro C at \" + this.getCurrentTimeMarker(this.id) + \"\\n\"\r\n\t\t\t\t\t+ \"Game call detected at \" + this.gameCallMarker + \" and Outro C triggered at \" + this.timeInSecToMarker(this.triggerPoint / 1000);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this.playingList[this.preId].getAudio().paused)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.pause(this.preId);\r\n\t\t\t\t\t\tthis.playingList[this.preId].getAudio().currentTime = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.audioTestDisplay.string = \"Loop finished fading out after \" + (Math.round((this.displayNextBeat - this.nextBeatAfterGCInMilSec) / 444.444) + 1) + \" beat(s) \"\r\n\t\t\t\t\t+ this.timeInSecToMarker(this.displayNextBeat / 1000) + \"\\n\"\r\n\t\t\t\t\t+ \"Scenario C: Outro B at \" + this.getCurrentTimeMarker(this.id) + \"\\n\"\r\n\t\t\t\t\t+ \"Game call detected at \" + this.gameCallMarker + \" and Outro C triggered at \" + this.timeInSecToMarker(this.triggerPoint / 1000);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.playingList[this.id].getAudio().paused && this.playingList[this.id].getAudio().currentTime >= this.playingList[this.id].getAudio().duration)\r\n\t\t\t\t\tthis.step += 1;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n    update: function (dt)\r\n\t{\r\n\t\tthis.getFPS();\r\n\t\tthis.seamlessProcess();\r\n\t\tthis.fadeProcess();\r\n\t\tthis.setLimiterAuto();\r\n\t\t// For testing\r\n\t\tthis.scenarioA();\r\n\t\tthis.scenarioB();\r\n\t\tthis.scenarioC();\r\n\t},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\t\tbackground: {\r\n            default: null,\r\n\t\t\tstage: 0,\r\n\t\t\tscore: 0,\r\n\t\t\ttotalScore: 0,\r\n            type: cc.Node\r\n        },\r\n\t\tflowerPrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tfencePrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\twinGoal: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t\tcharacter: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t}\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tcc.game.addPersistRootNode(this.background);\r\n\t\tthis.background.zIndex = -1;\r\n\t\tthis.background.stage = 1;\r\n\t\tthis.player = this.character.getComponent('character');\r\n\t\tthis.character.getComponent('character').game = this;\r\n\t\tlet size = this.node.getComponent('utils').outlinePool.size();\r\n\t\tthis.flowerPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < size; i++) {\r\n\t\t\tlet flower = cc.instantiate(this.flowerPrefab); // create node instance\r\n\t\t\tthis.flowerPool.put(flower); // populate your pool with put method\r\n\t\t}\r\n\t\tlet x = -1;\r\n\t\tthis.map = [\r\n\t\t\tx, x, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, x, x, x, \r\n\t\t\tx, x, x, x, x, x, x, 1, x, x, x, x, x, x, x, x, x, x, x, \r\n\t\t\tx, x, 1, x, x, x, x, 1, x, x, x, x, x, x, x, x, x, x, x, \r\n\t\t\tx, x, 1, x, x, x, 1, 1, x, 1, 1, 1, 1, 1, 1, 1, 1, x, x, \r\n\t\t\tx, x, 1, x, x, x, x, 1, x, x, x, x, x, x, x, 1, 1, x, x, \r\n\t\t\tx, x, 1, 1, 1, 1, x, 1, x, x, x, x, x, x, x, 1, 1, x, x, \r\n\t\t\tx, x, x, x, x, 1, x, 1, x, 2, x, x, x, x, x, 1, 1, x, x, \r\n\t\t\t1, 1, 1, 1, x, 1, x, 1, x, x, x, x, x, x, x, 1, 1, x, x, \r\n\t\t\tx, x, x, x, x, 1, x, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, x, x, \r\n\t\t\tx, x, x, x, x, 1, x, x, x, x, x, x, x, x, x, x, 1, 1, x, \r\n\t\t\tx, x, x, x, x, 1, x, x, x, x, 1, 1, 1, 1, x, x, x, x, x, \r\n\t\t\t0, x, x, x, x, 1, x, x, x, x, 1, 1, 1, 1, x, x, x, x, x\r\n\t\t];\r\n\t\tthis.flowerPos = [];\r\n\t\tthis.fencePos = [];\r\n\t\tlet maxRow = this.node.getComponent('utils').rowCount;\r\n\t\tlet maxCol = this.node.getComponent('utils').colCount;\r\n\t\tlet colCount = 0;\r\n\t\tfor (let i = 0; i < this.map.length; i++) {\r\n\t\t\tif (i == colCount + maxCol) {\r\n\t\t\t\tmaxRow -= 1;\r\n\t\t\t\tcolCount += maxCol;\r\n\t\t\t}\r\n\t\t\tif (this.map[i] == 0) {\r\n\t\t\t\tthis.startCell = cc.v2(i + 1 - colCount, maxRow);\r\n\t\t\t} else if (this.map[i] == 1) {\r\n\t\t\t\tthis.fencePos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 2) {\r\n\t\t\t\tthis.winGoal.setPosition(this.node.getComponent('utils').getCellPos(i + 1 - colCount, maxRow));\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.fencePool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.fencePos.length; i++) {\r\n\t\t\tthis.fencePos[i] = this.node.getComponent('utils').createObstacle(this.node, this.fencePos[i], this.fencePrefab, this.fencePool, true);\r\n\t\t}\r\n\t\tlet startPos = this.node.getComponent('utils').getCellPos(this.startCell.x, this.startCell.y);\r\n\t\tthis.player.node.setPosition(startPos);\r\n\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, startPos, this.flowerPrefab, this.flowerPool, this.flowerPos, null);\r\n\t\tthis.background.totalScore = this.node.getComponent('utils').totalScore;\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update: function (dt) {\r\n\t\tlet pos = this.player.checkMovedInCell();\r\n\t\tif (this.player.checkHitCapturedCell(this.flowerPos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.player.checkHitObstacle(this.fencePos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (pos != null) {\r\n\t\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, pos, this.flowerPrefab, this.flowerPool, this.flowerPos, this.player);\r\n\t\t} \r\n\t},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        background: {\r\n            default: null,\r\n\t\t\tstage: 0,\r\n\t\t\tscore: 0,\r\n\t\t\ttotalScore: 0,\r\n            type: cc.Node\r\n        },\r\n\t\tflowerPrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tfencePrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tgrassPrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\twinGoal: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t\tcharacter: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t}\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tcc.game.addPersistRootNode(this.background);\r\n\t\tthis.background.zIndex = -1;\r\n\t\tthis.background.stage = 2;\r\n\t\tthis.player = this.character.getComponent('character');\r\n\t\tthis.character.getComponent('character').game = this;\r\n\t\tlet size = this.node.getComponent('utils').outlinePool.size();\r\n\t\tthis.flowerPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < size; i++) {\r\n\t\t\tlet flower = cc.instantiate(this.flowerPrefab); // create node instance\r\n\t\t\tthis.flowerPool.put(flower); // populate your pool with put method\r\n\t\t}\r\n\t\tlet x = -1;\r\n\t\tthis.map = [\r\n\t\t\t0, x, x, x, x, x, 1, x, x, x, x, x, x, x, x, x, x, x, x, \r\n\t\t\tx, x, 1, 1, 1, x, 1, x, 2, x, x, x, x, x, 1, 1, 1, 1, x, \r\n\t\t\t1, 1, 1, 1, x, x, 1, x, 1, 1, 1, 1, 1, 1, x, x, x, x, x, \r\n\t\t\tx, x, x, x, x, 2, 1, x, 2, x, x, x, x, x, x, 2, 1, 1, 1, \r\n\t\t\tx, x, 2, x, x, 1, x, x, x, x, 1, x, x, 2, x, x, x, x, x, \r\n\t\t\t2, x, x, 1, 1, 1, 1, x, x, x, x, x, x, x, x, x, x, x, x, \r\n\t\t\t1, 1, x, x, x, 2, 1, x, x, 3, 1, 1, 1, 1, 1, x, 1, 1, 1, \r\n\t\t\t2, 1, x, x, x, x, 1, 1, 1, 1, x, x, x, x, x, x, x, x, 1, \r\n\t\t\t2, 1, x, x, x, x, x, x, 1, 1, x, x, x, x, x, x, x, x, 1, \r\n\t\t\t1, 1, x, x, x, x, x, x, 1, 1, 1, 1, 1, x, x, x, x, 2, 2, \r\n\t\t\tx, x, x, x, 1, 2, 2, x, x, x, x, x, x, x, x, x, x, x, x, \r\n\t\t\tx, x, x, x, 1, 1, 1, x, x, x, x, x, x, 1, 1, x, x, x, x\r\n\t\t];\r\n\t\tthis.flowerPos = [];\r\n\t\tthis.fencePos = [];\r\n\t\tthis.grassPos = [];\r\n\t\tlet maxRow = this.node.getComponent('utils').rowCount;\r\n\t\tlet maxCol = this.node.getComponent('utils').colCount;\r\n\t\tlet colCount = 0;\r\n\t\tfor (let i = 0; i < this.map.length; i++) {\r\n\t\t\tif (i == colCount + maxCol) {\r\n\t\t\t\tmaxRow -= 1;\r\n\t\t\t\tcolCount += maxCol;\r\n\t\t\t}\r\n\t\t\tif (this.map[i] == 0) {\r\n\t\t\t\tthis.startCell = cc.v2(i + 1 - colCount, maxRow);\r\n\t\t\t} else if (this.map[i] == 1) {\r\n\t\t\t\tthis.fencePos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 2) {\r\n\t\t\t\tthis.grassPos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 3) {\r\n\t\t\t\tthis.winGoal.setPosition(this.node.getComponent('utils').getCellPos(i + 1 - colCount, maxRow));\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.fencePool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.fencePos.length; i++) {\r\n\t\t\tthis.fencePos[i] = this.node.getComponent('utils').createObstacle(this.node, this.fencePos[i], this.fencePrefab, this.fencePool, true);\r\n\t\t}\r\n\t\tthis.grassPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.grassPos.length; i++) {\r\n\t\t\tthis.grassPos[i] = this.node.getComponent('utils').createObstacle(this.node, this.grassPos[i], this.grassPrefab, this.grassPool, true);\r\n\t\t}\r\n\t\tlet startPos = this.node.getComponent('utils').getCellPos(this.startCell.x, this.startCell.y);\r\n\t\tthis.player.node.setPosition(startPos);\r\n\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, startPos, this.flowerPrefab, this.flowerPool, this.flowerPos, null);\r\n\t\tthis.background.totalScore = this.node.getComponent('utils').totalScore;\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update: function (dt) {\r\n\t\tlet pos = this.player.checkMovedInCell();\r\n\t\tif (this.player.checkHitCapturedCell(this.flowerPos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.player.checkHitObstacle(this.fencePos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.player.checkHitObstacle(this.grassPos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (pos != null) {\r\n\t\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, pos, this.flowerPrefab, this.flowerPool, this.flowerPos, this.player);\r\n\t\t} \r\n\t},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        background: {\r\n            default: null,\r\n\t\t\tstage: 0,\r\n\t\t\tscore: 0,\r\n\t\t\ttotalScore: 0,\r\n            type: cc.Node\r\n        },\r\n\t\tflowerPrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tfencePrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tgrassPrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tsheepPrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\twinGoal: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t\tcharacter: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t}\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tcc.game.addPersistRootNode(this.background);\r\n\t\tthis.background.zIndex = -1;\r\n\t\tthis.background.stage = 3;\r\n\t\tthis.player = this.character.getComponent('character');\r\n\t\tthis.character.getComponent('character').game = this;\r\n\t\tlet size = this.node.getComponent('utils').outlinePool.size();\r\n\t\tthis.flowerPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < size; i++) {\r\n\t\t\tlet flower = cc.instantiate(this.flowerPrefab); // create node instance\r\n\t\t\tthis.flowerPool.put(flower); // populate your pool with put method\r\n\t\t}\r\n\t\tlet x = -1;\r\n\t\tthis.map = [\r\n\t\t\tx, x, x, 1, x, x, x, x, x, 1, x, x, x, x, x, x, x, x, x, \r\n\t\t\tx, 2, x, 1, x, 1, 1, 1, x, 1, x, x, x, x, x, 1, 1, 1, x, \r\n\t\t\tx, x, x, 1, x, 1, 1, 1, x, 1, 1, 1, 1, 1, x, 1, x, x, x, \r\n\t\t\tx, x, x, 1, x, 2, x, x, x, x, x, x, x, 1, x, x, x, 3, x, \r\n\t\t\tx, 1, x, x, 3, x, x, x, x, x, x, x, x, 1, 1, x, x, x, 2, \r\n\t\t\tx, 1, 1, 1, x, x, x, 3, x, 0, x, x, x, 1, x, x, 1, x, x, \r\n\t\t\tx, 1, 1, 1, x, x, 2, x, x, x, x, 1, 1, 1, x, 2, x, x, x, \r\n\t\t\tx, x, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, x, x, 3, x, x, \r\n\t\t\t2, x, 1, 1, x, x, x, x, x, x, x, x, x, x, x, 4, x, x, x, \r\n\t\t\tx, x, 1, 1, x, x, x, x, 3, x, x, x, 1, 1, x, x, x, x, x, \r\n\t\t\tx, 1, 1, x, x, 1, 1, 1, x, x, x, x, 1, 1, x, x, x, x, x, \r\n\t\t\tx, x, x, x, 1, 1, 1, 1, x, x, x, x, 1, 1, x, x, 2, x, x\r\n\t\t];\r\n\t\tthis.flowerPos = [];\r\n\t\tthis.fencePos = [];\r\n\t\tthis.grassPos = [];\r\n\t\tthis.sheepPos = [];\r\n\t\tlet maxRow = this.node.getComponent('utils').rowCount;\r\n\t\tlet maxCol = this.node.getComponent('utils').colCount;\r\n\t\tlet colCount = 0;\r\n\t\tfor (let i = 0; i < this.map.length; i++) {\r\n\t\t\tif (i == colCount + maxCol) {\r\n\t\t\t\tmaxRow -= 1;\r\n\t\t\t\tcolCount += maxCol;\r\n\t\t\t}\r\n\t\t\tif (this.map[i] == 0) {\r\n\t\t\t\tthis.startCell = cc.v2(i + 1 - colCount, maxRow);\r\n\t\t\t} else if (this.map[i] == 1) {\r\n\t\t\t\tthis.fencePos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 2) {\r\n\t\t\t\tthis.grassPos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 3) {\r\n\t\t\t\tthis.sheepPos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 4) {\r\n\t\t\t\tthis.winGoal.setPosition(this.node.getComponent('utils').getCellPos(i + 1 - colCount, maxRow));\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.fencePool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.fencePos.length; i++) {\r\n\t\t\tthis.fencePos[i] = this.node.getComponent('utils').createObstacle(this.node, this.fencePos[i], this.fencePrefab, this.fencePool, true);\r\n\t\t}\r\n\t\tthis.grassPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.grassPos.length; i++) {\r\n\t\t\tthis.grassPos[i] = this.node.getComponent('utils').createObstacle(this.node, this.grassPos[i], this.grassPrefab, this.grassPool, true);\r\n\t\t}\r\n\t\tthis.sheepIndexList = [];\r\n\t\tthis.sheepPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.sheepPos.length; i++) {\r\n\t\t\tthis.sheepPos[i] = this.node.getComponent('utils').createObj(this.node, this.sheepPos[i], this.sheepPrefab, this.sheepPool, true);\r\n\t\t\tthis.sheepIndexList.push(this.node.getComponent('utils').objCollection.length - 1);\r\n\t\t}\r\n\t\tlet startPos = this.node.getComponent('utils').getCellPos(this.startCell.x, this.startCell.y);\r\n\t\tthis.player.node.setPosition(startPos);\r\n\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, startPos, this.flowerPrefab, this.flowerPool, this.flowerPos, null);\r\n\t\tthis.background.totalScore = this.node.getComponent('utils').totalScore;\r\n\t\tthis.hitSheep = false;\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update: function (dt) {\r\n\t\tlet pos = this.player.checkMovedInCell();\r\n\t\tif (this.player.checkHitCapturedCell(this.flowerPos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.player.checkHitObstacle(this.fencePos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.player.checkHitObstacle(this.grassPos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet sheepTmp = this.player.checkHitObstacle(this.sheepPos);\r\n\t\tif (sheepTmp != null) {\r\n\t\t\tthis.sheepPos.splice(sheepTmp, 1);\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.sheepIndexList[sheepTmp]].removeFromParent(true);\r\n\t\t\tthis.hitSheep = true;\r\n\t\t\tthis.sheepIndexList.splice(sheepTmp, 1);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (pos != null) {\r\n\t\t\tif (!this.hitSheep) {\r\n\t\t\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, pos, this.flowerPrefab, this.flowerPool, this.flowerPos, this.player);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.hitSheep = false;\r\n\t\t}\r\n\t},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        background: {\r\n            default: null,\r\n\t\t\tstage: 0,\r\n\t\t\tscore: 0,\r\n\t\t\ttotalScore: 0,\r\n            type: cc.Node\r\n        },\r\n\t\tsnowFlakePrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tiglooPrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\ticeSkatePrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tsnowballPrefab: {\r\n\t\t\tdefault: null,\r\n\t\t\torgPos: 0,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\twinGoal: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t\tcharacter: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t}\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tcc.game.addPersistRootNode(this.background);\r\n\t\tthis.background.zIndex = -1;\r\n\t\tthis.background.stage = 4;\r\n\t\tthis.player = this.character.getComponent('character');\r\n\t\tthis.character.getComponent('character').game = this;\r\n\t\tlet size = this.node.getComponent('utils').outlinePool.size();\r\n\t\tthis.snowFlakePool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < size; i++) {\r\n\t\t\tlet snowFlake = cc.instantiate(this.snowFlakePrefab); // create node instance\r\n\t\t\tthis.snowFlakePool.put(snowFlake); // populate your pool with put method\r\n\t\t}\r\n\t\tlet x = -1;\r\n\t\tthis.map = [\r\n\t\t\t0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n\t\t\tx, x, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, x, x, x, x,\r\n\t\t\t1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, x,\r\n\t\t\tx, x, x, x, x, 2, 2, 2, 2, 2, 2, 2, x, x, x, x, x, x, x,\r\n\t\t\tx, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n\t\t\tx, x, 2, 2, 2, x, 2, 2, 2, x, x, 2, 2, 2, x, x, x, x, x,\r\n\t\t\t1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, x,\r\n\t\t\t2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,\r\n\t\t\tx, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n\t\t\tx, x, 2, 2, 2, 2, 2, 2, x, x, 2, 2, 2, 2, 2, 2, x, x, 2,\r\n\t\t\t1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,\r\n\t\t\t3, x, 2, 2, 2, 2, 2, 2, x, x, x, x, 2, 2, 2, 2, 2, 2, 2\r\n\t\t];\r\n\t\tthis.snowFlakePos = [];\r\n\t\tthis.iglooPos = [];\r\n\t\tthis.iceSkatePos = [];\r\n\t\tthis.snowballPos = [\r\n\t\t\tcc.v2(7, 15),\r\n\t\t\tcc.v2(7, 22),\r\n\t\t\tcc.v2(12, 18),\r\n\t\t\tcc.v2(12, 26),\r\n\t\t\tcc.v2(16, 20),\r\n\t\t\tcc.v2(16, 30)\t\r\n\t\t];\r\n\t\tlet maxRow = this.node.getComponent('utils').rowCount;\r\n\t\tlet maxCol = this.node.getComponent('utils').colCount;\r\n\t\tlet colCount = 0;\r\n\t\tfor (let i = 0; i < this.map.length; i++) {\r\n\t\t\tif (i == colCount + maxCol) {\r\n\t\t\t\tmaxRow -= 1;\r\n\t\t\t\tcolCount += maxCol;\r\n\t\t\t}\r\n\t\t\tif (this.map[i] == 0) {\r\n\t\t\t\tthis.startCell = cc.v2(i + 1 - colCount, maxRow);\r\n\t\t\t} else if (this.map[i] == 1) {\r\n\t\t\t\tthis.iglooPos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 2) {\r\n\t\t\t\tthis.iceSkatePos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 3) {\r\n\t\t\t\tthis.winGoal.setPosition(this.node.getComponent('utils').getCellPos(i + 1 - colCount, maxRow));\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.iglooPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.iglooPos.length; i++) {\r\n\t\t\tthis.iglooPos[i] = this.node.getComponent('utils').createObstacle(this.node, this.iglooPos[i], this.iglooPrefab, this.iglooPool, true);\r\n\t\t}\r\n\t\tthis.iceSkatePool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.iceSkatePos.length; i++) {\r\n\t\t\tthis.iceSkatePos[i] = this.node.getComponent('utils').createObstacle(this.node, this.iceSkatePos[i], this.iceSkatePrefab, this.iceSkatePool, true);\r\n\t\t}\r\n\t\tthis.snowballIndexList = [];\r\n\t\tthis.snowballPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.snowballPos.length; i++) {\r\n\t\t\tthis.snowballPos[i] = this.node.getComponent('utils').createObj(this.node, this.snowballPos[i], this.snowballPrefab, this.snowballPool, true);\r\n\t\t\tthis.snowballIndexList.push(this.node.getComponent('utils').objCollection.length - 1);\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.node.getComponent('utils').objCollection.length - 1].orgPos = this.snowballPos[i].y;\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.node.getComponent('utils').objCollection.length - 1].zIndex = 4;\r\n\t\t}\r\n\t\tlet startPos = this.node.getComponent('utils').getCellPos(this.startCell.x, this.startCell.y);\r\n\t\tthis.player.node.setPosition(startPos);\r\n\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, startPos, this.snowFlakePrefab, this.snowFlakePool, this.snowFlakePos, null);\r\n\t\tthis.background.totalScore = this.node.getComponent('utils').totalScore;\r\n\t\tthis.spdUpAmount = 1;\r\n\t\tthis.spdUp = false;\r\n\t\tthis.snowballSpd = 1;\r\n\t\tthis.maxSnowballPerCol = 2;\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update: function (dt) {\r\n\t\tlet pos = this.player.checkMovedInCell();\r\n\t\tif (this.player.checkHitCapturedCell(this.snowFlakePos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.player.checkHitObstacle(this.iglooPos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (pos != null) {\r\n\t\t\tif (!this.spdUp) {\r\n\t\t\t\tfor (let i = 0; i < this.iceSkatePos.length; i++) {\r\n\t\t\t\t\tif (this.iceSkatePos[i].x == pos.x && this.iceSkatePos[i].y == pos.y) {\r\n\t\t\t\t\t\tthis.player.moveSpeed += this.spdUpAmount;\r\n\t\t\t\t\t\tthis.spdUp = true;\r\n\t\t\t\t\t\tthis.player.resetCapturedCell();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this.iceSkatePos.length; i++) {\r\n\t\t\t\t\tif (this.iceSkatePos[i].x == pos.x && this.iceSkatePos[i].y == pos.y) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.moveSpeed -= this.spdUpAmount;\r\n\t\t\t\tthis.spdUp = false;\r\n\t\t\t}\r\n\t\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, pos, this.snowFlakePrefab, this.snowFlakePool, this.snowFlakePos, this.player);\r\n\t\t}\r\n\t\tfor (let i = 0; i < this.snowballIndexList.length; i++) {\r\n\t\t\tlet snowballIndex = this.snowballIndexList[0] + i;\r\n\t\t\tif (this.node.getComponent('utils').checkCollapsed(this.player, this.node.getComponent('utils').objCollection[snowballIndex], this.player.node.width / 2 + this.snowballPrefab.data.width / 2 - 15)) {\r\n\t\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ((i + 1) % this.maxSnowballPerCol == 0 && this.node.getComponent('utils').objCollection[snowballIndex].y < -this.node.height / 2 - this.snowballPrefab.data.height / 2) {\r\n\t\t\t\tfor (let j = 0; j < this.maxSnowballPerCol; j++) {\r\n\t\t\t\t\tthis.node.getComponent('utils').objCollection[snowballIndex - j].y = this.node.getComponent('utils').objCollection[snowballIndex - j].orgPos;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.node.getComponent('utils').objCollection[snowballIndex].y -= this.snowballSpd;\r\n\t\t}\r\n\t},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        background: {\r\n            default: null,\r\n\t\t\tstage: 0,\r\n\t\t\tscore: 0,\r\n\t\t\ttotalScore: 0,\r\n            type: cc.Node\r\n        },\r\n\t\tsnowFlakePrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tiglooPrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\ticeSkatePrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tsnowballPrefab: {\r\n\t\t\tdefault: null,\r\n\t\t\torgPos: 0,\r\n\t\t\tdir: 1,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\twinGoal: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t\tcharacter: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t}\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tcc.game.addPersistRootNode(this.background);\r\n\t\tthis.background.zIndex = -1;\r\n\t\tthis.background.stage = 5;\r\n\t\tthis.player = this.character.getComponent('character');\r\n\t\tthis.character.getComponent('character').game = this;\r\n\t\tlet size = this.node.getComponent('utils').outlinePool.size();\r\n\t\tthis.snowFlakePool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < size; i++) {\r\n\t\t\tlet snowFlake = cc.instantiate(this.snowFlakePrefab); // create node instance\r\n\t\t\tthis.snowFlakePool.put(snowFlake); // populate your pool with put method\r\n\t\t}\r\n\t\tlet x = -1;\r\n\t\tthis.map = [\r\n\t\t\t0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, \r\n\t\t\tx, x, x, 2, x, x, x, 2, x, x, x, 2, x, x, x, 2, x, x, x, \r\n\t\t\t1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, x, \r\n\t\t\tx, 2, 2, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, \r\n\t\t\tx, 2, 1, 1, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, \r\n\t\t\tx, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, \r\n\t\t\t1, 1, 1, 2, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, x, \r\n\t\t\tx, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, \r\n\t\t\tx, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, \r\n\t\t\tx, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, 2, \r\n\t\t\t1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 2,\r\n\t\t\t3, x, x, 2, x, x, x, 2, x, x, x, 2, x, x, x, 2, x, x, 2\r\n\t\t];\r\n\t\tthis.snowFlakePos = [];\r\n\t\tthis.iglooPos = [];\r\n\t\tthis.iceSkatePos = [];\r\n\t\tthis.snowballPos = [\r\n\t\t\tcc.v2(-5, 11),\r\n\t\t\tcc.v2(25, 9),\r\n\t\t\tcc.v2(-5, 7),\r\n\t\t\tcc.v2(25, 5),\r\n\t\t\tcc.v2(-5, 3),\r\n\t\t\tcc.v2(25, 1)\t\r\n\t\t];\r\n\t\tlet maxRow = this.node.getComponent('utils').rowCount;\r\n\t\tlet maxCol = this.node.getComponent('utils').colCount;\r\n\t\tlet colCount = 0;\r\n\t\tfor (let i = 0; i < this.map.length; i++) {\r\n\t\t\tif (i == colCount + maxCol) {\r\n\t\t\t\tmaxRow -= 1;\r\n\t\t\t\tcolCount += maxCol;\r\n\t\t\t}\r\n\t\t\tif (this.map[i] == 0) {\r\n\t\t\t\tthis.startCell = cc.v2(i + 1 - colCount, maxRow);\r\n\t\t\t} else if (this.map[i] == 1) {\r\n\t\t\t\tthis.iglooPos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 2) {\r\n\t\t\t\tthis.iceSkatePos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 3) {\r\n\t\t\t\tthis.winGoal.setPosition(this.node.getComponent('utils').getCellPos(i + 1 - colCount, maxRow));\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.iglooPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.iglooPos.length; i++) {\r\n\t\t\tthis.iglooPos[i] = this.node.getComponent('utils').createObstacle(this.node, this.iglooPos[i], this.iglooPrefab, this.iglooPool, true);\r\n\t\t}\r\n\t\tthis.iceSkatePool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.iceSkatePos.length; i++) {\r\n\t\t\tthis.iceSkatePos[i] = this.node.getComponent('utils').createObstacle(this.node, this.iceSkatePos[i], this.iceSkatePrefab, this.iceSkatePool, true);\r\n\t\t}\r\n\t\tthis.snowballIndexList = [];\r\n\t\tthis.snowballPool = new cc.NodePool();\r\n\t\tlet dirTmp = 1;\r\n\t\tfor (let i = 0; i < this.snowballPos.length; i++) {\r\n\t\t\tthis.snowballPos[i] = this.node.getComponent('utils').createObj(this.node, this.snowballPos[i], this.snowballPrefab, this.snowballPool, true);\r\n\t\t\tthis.snowballIndexList.push(this.node.getComponent('utils').objCollection.length - 1);\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.node.getComponent('utils').objCollection.length - 1].orgPos = this.snowballPos[i].x;\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.node.getComponent('utils').objCollection.length - 1].dir = dirTmp;\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.node.getComponent('utils').objCollection.length - 1].zIndex = 4;\r\n\t\t\tdirTmp *= -1;\r\n\t\t}\r\n\t\tlet startPos = this.node.getComponent('utils').getCellPos(this.startCell.x, this.startCell.y);\r\n\t\tthis.player.node.setPosition(startPos);\r\n\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, startPos, this.snowFlakePrefab, this.snowFlakePool, this.snowFlakePos, null);\r\n\t\tthis.background.totalScore = this.node.getComponent('utils').totalScore;\r\n\t\tthis.spdUpAmount = 1;\r\n\t\tthis.spdUp = false;\r\n\t\tthis.snowballSpd = 2.5;\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update: function (dt) {\r\n\t\tlet pos = this.player.checkMovedInCell();\r\n\t\tif (this.player.checkHitCapturedCell(this.snowFlakePos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.player.checkHitObstacle(this.iglooPos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (pos != null) {\r\n\t\t\tif (!this.spdUp) {\r\n\t\t\t\tfor (let i = 0; i < this.iceSkatePos.length; i++) {\r\n\t\t\t\t\tif (this.iceSkatePos[i].x == pos.x && this.iceSkatePos[i].y == pos.y) {\r\n\t\t\t\t\t\tthis.player.moveSpeed += this.spdUpAmount;\r\n\t\t\t\t\t\tthis.spdUp = true;\r\n\t\t\t\t\t\tthis.player.resetCapturedCell();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this.iceSkatePos.length; i++) {\r\n\t\t\t\t\tif (this.iceSkatePos[i].x == pos.x && this.iceSkatePos[i].y == pos.y) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.moveSpeed -= this.spdUpAmount;\r\n\t\t\t\tthis.spdUp = false;\r\n\t\t\t}\r\n\t\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, pos, this.snowFlakePrefab, this.snowFlakePool, this.snowFlakePos, this.player);\r\n\t\t}\r\n\t\tfor (let i = 0; i < this.snowballIndexList.length; i++) {\r\n\t\t\tlet snowballIndex = this.snowballIndexList[0] + i;\r\n\t\t\tif (this.node.getComponent('utils').checkCollapsed(this.player, this.node.getComponent('utils').objCollection[snowballIndex], this.player.node.width / 2 + this.snowballPrefab.data.width / 2 - 15)) {\r\n\t\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.node.getComponent('utils').objCollection[snowballIndex].dir == -1) {\r\n\t\t\t\tif (this.node.getComponent('utils').objCollection[snowballIndex].x < -this.node.width / 2 - this.snowballPrefab.data.width / 2) {\r\n\t\t\t\t\tthis.node.getComponent('utils').objCollection[snowballIndex].x = this.node.getComponent('utils').objCollection[snowballIndex].orgPos;\r\n\t\t\t\t}\r\n\t\t\t} else if (this.node.getComponent('utils').objCollection[snowballIndex].x > this.node.width / 2 + this.snowballPrefab.data.width / 2) {\r\n\t\t\t\t\tthis.node.getComponent('utils').objCollection[snowballIndex].x = this.node.getComponent('utils').objCollection[snowballIndex].orgPos;\r\n\t\t\t}\r\n\t\t\tthis.node.getComponent('utils').objCollection[snowballIndex].x += this.snowballSpd * this.node.getComponent('utils').objCollection[snowballIndex].dir;\r\n\t\t}\r\n\t},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        background: {\r\n            default: null,\r\n\t\t\tstage: 0,\r\n\t\t\tscore: 0,\r\n\t\t\ttotalScore: 0,\r\n            type: cc.Node\r\n        },\r\n\t\tsnowFlakePrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tiglooPrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\ticeSkatePrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tsnowballPrefab: {\r\n\t\t\tdefault: null,\r\n\t\t\torgPos: 0,\r\n\t\t\tdir: 1,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\twinGoal: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t\tcharacter: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t}\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tcc.game.addPersistRootNode(this.background);\r\n\t\tthis.background.zIndex = -1;\r\n\t\tthis.background.stage = 6;\r\n\t\tthis.player = this.character.getComponent('character');\r\n\t\tthis.character.getComponent('character').game = this;\r\n\t\tlet size = this.node.getComponent('utils').outlinePool.size();\r\n\t\tthis.snowFlakePool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < size; i++) {\r\n\t\t\tlet snowFlake = cc.instantiate(this.snowFlakePrefab); // create node instance\r\n\t\t\tthis.snowFlakePool.put(snowFlake); // populate your pool with put method\r\n\t\t}\r\n\t\tlet x = -1;\r\n\t\tthis.map = [\r\n\t\t\t0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, \r\n\t\t\tx, 2, 2, 2, 2, x, x, x, x, x, x, x, x, 2, 2, 1, x, x, x, \r\n\t\t\t1, x, 1, 1, x, 1, x, 1, 1, 2, 1, x, 1, 1, 2, 1, x, 1, x, \r\n\t\t\t1, x, 1, 1, x, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, x, 1, x, \r\n\t\t\t1, x, x, x, x, 1, 2, 2, 2, 2, x, 2, 2, 2, 2, 2, 2, x, x,\t\t\r\n\t\t\t1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, \r\n\t\t\t1, x, 1, 1, 1, x, 1, 1, 1, x, 1, 1, 1, x, 1, 1, 2, x, x, \r\n\t\t\t1, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, 2, x, \r\n\t\t\t1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, \r\n\t\t\tx, x, 1, x, 1, x, 1, x, 1, x, 1, x, 1, x, 1, x, 1, x, 1, \r\n\t\t\tx, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 2,\r\n\t\t\tx, x, 2, 2, x, x, x, 2, 2, x, x, x, 2, 2, x, x, x, x, 3\r\n\t\t];\r\n\t\tthis.snowFlakePos = [];\r\n\t\tthis.iglooPos = [];\r\n\t\tthis.iceSkatePos = [];\r\n\t\tthis.snowballPos_1 = [\r\n\t\t\tcc.v2(3.5, 15),\r\n\t\t\tcc.v2(3.5, 22),\r\n\t\t\tcc.v2(3.5, 29),\r\n\t\t\tcc.v2(8.5, 15),\r\n\t\t\tcc.v2(8.5, 22),\r\n\t\t\tcc.v2(8.5, 29),\r\n\t\t\tcc.v2(13.5, 15),\r\n\t\t\tcc.v2(13.5, 22),\r\n\t\t\tcc.v2(13.5, 29),\r\n\t\t\tcc.v2(18.5, 15),\r\n\t\t\tcc.v2(18.5, 22),\r\n\t\t\tcc.v2(18.5, 29)\r\n\t\t];\r\n\t\tthis.snowballPos_2 = [\r\n\t\t\tcc.v2(22, 3)\r\n\t\t]\r\n\t\tlet maxRow = this.node.getComponent('utils').rowCount;\r\n\t\tlet maxCol = this.node.getComponent('utils').colCount;\r\n\t\tlet colCount = 0;\r\n\t\tfor (let i = 0; i < this.map.length; i++) {\r\n\t\t\tif (i == colCount + maxCol) {\r\n\t\t\t\tmaxRow -= 1;\r\n\t\t\t\tcolCount += maxCol;\r\n\t\t\t}\r\n\t\t\tif (this.map[i] == 0) {\r\n\t\t\t\tthis.startCell = cc.v2(i + 1 - colCount, maxRow);\r\n\t\t\t} else if (this.map[i] == 1) {\r\n\t\t\t\tthis.iglooPos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 2) {\r\n\t\t\t\tthis.iceSkatePos.push(cc.v2(i + 1 - colCount, maxRow));\r\n\t\t\t} else if (this.map[i] == 3) {\r\n\t\t\t\tthis.winGoal.setPosition(this.node.getComponent('utils').getCellPos(i + 1 - colCount, maxRow));\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.iglooPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.iglooPos.length; i++) {\r\n\t\t\tthis.iglooPos[i] = this.node.getComponent('utils').createObstacle(this.node, this.iglooPos[i], this.iglooPrefab, this.iglooPool, true);\r\n\t\t}\r\n\t\tthis.iceSkatePool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.iceSkatePos.length; i++) {\r\n\t\t\tthis.iceSkatePos[i] = this.node.getComponent('utils').createObstacle(this.node, this.iceSkatePos[i], this.iceSkatePrefab, this.iceSkatePool, true);\r\n\t\t}\r\n\t\tthis.snowballIndexList_1 = [];\r\n\t\tthis.snowballPool = new cc.NodePool();\r\n\t\tfor (let i = 0; i < this.snowballPos_1.length; i++) {\r\n\t\t\tthis.snowballPos_1[i] = this.node.getComponent('utils').createObj(this.node, this.snowballPos_1[i], this.snowballPrefab, this.snowballPool, true);\r\n\t\t\tthis.snowballIndexList_1.push(this.node.getComponent('utils').objCollection.length - 1);\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.node.getComponent('utils').objCollection.length - 1].orgPos = this.snowballPos_1[i].y;\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.node.getComponent('utils').objCollection.length - 1].zIndex = 4;\r\n\t\t}\r\n\t\tthis.snowballIndexList_2 = [];\r\n\t\tlet dirTmp = -1;\r\n\t\tfor (let i = 0; i < this.snowballPos_2.length; i++) {\r\n\t\t\tthis.snowballPos_2[i] = this.node.getComponent('utils').createObj(this.node, this.snowballPos_2[i], this.snowballPrefab, this.snowballPool, true);\r\n\t\t\tthis.snowballIndexList_2.push(this.node.getComponent('utils').objCollection.length - 1);\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.node.getComponent('utils').objCollection.length - 1].orgPos = this.snowballPos_2[i].x;\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.node.getComponent('utils').objCollection.length - 1].dir = dirTmp;\r\n\t\t\tthis.node.getComponent('utils').objCollection[this.node.getComponent('utils').objCollection.length - 1].zIndex = 4;\r\n\t\t}\r\n\t\tlet startPos = this.node.getComponent('utils').getCellPos(this.startCell.x, this.startCell.y);\r\n\t\tthis.player.node.setPosition(startPos);\r\n\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, startPos, this.snowFlakePrefab, this.snowFlakePool, this.snowFlakePos, null);\r\n\t\tthis.background.totalScore = this.node.getComponent('utils').totalScore;\r\n\t\tthis.spdUpAmount = 1;\r\n\t\tthis.spdUp = false;\r\n\t\tthis.snowballSpd = 2.5;\r\n\t\tthis.maxSnowballPerCol = 3;\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update: function (dt) {\r\n\t\tlet pos = this.player.checkMovedInCell();\r\n\t\tif (this.player.checkHitCapturedCell(this.snowFlakePos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.player.checkHitObstacle(this.iglooPos) != null) {\r\n\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (pos != null) {\r\n\t\t\tif (!this.spdUp) {\r\n\t\t\t\tfor (let i = 0; i < this.iceSkatePos.length; i++) {\r\n\t\t\t\t\tif (this.iceSkatePos[i].x == pos.x && this.iceSkatePos[i].y == pos.y) {\r\n\t\t\t\t\t\tthis.player.moveSpeed += this.spdUpAmount;\r\n\t\t\t\t\t\tthis.spdUp = true;\r\n\t\t\t\t\t\tthis.player.resetCapturedCell();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this.iceSkatePos.length; i++) {\r\n\t\t\t\t\tif (this.iceSkatePos[i].x == pos.x && this.iceSkatePos[i].y == pos.y) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.moveSpeed -= this.spdUpAmount;\r\n\t\t\t\tthis.spdUp = false;\r\n\t\t\t}\r\n\t\t\tthis.background.score = this.node.getComponent('utils').putObj(this.node, pos, this.snowFlakePrefab, this.snowFlakePool, this.snowFlakePos, this.player);\r\n\t\t}\r\n\t\tfor (let i = 0; i < this.snowballIndexList_1.length; i++) {\r\n\t\t\tlet snowballIndex = this.snowballIndexList_1[0] + i;\r\n\t\t\tif (this.node.getComponent('utils').checkCollapsed(this.player, this.node.getComponent('utils').objCollection[snowballIndex], this.player.node.width / 2 + this.snowballPrefab.data.width / 2 - 15)) {\r\n\t\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ((i + 1) % this.maxSnowballPerCol == 0 && this.node.getComponent('utils').objCollection[snowballIndex].y < -this.node.height / 2 - this.snowballPrefab.data.height / 2) {\r\n\t\t\t\tfor (let j = 0; j < this.maxSnowballPerCol; j++) {\r\n\t\t\t\t\tthis.node.getComponent('utils').objCollection[snowballIndex - j].y = this.node.getComponent('utils').objCollection[snowballIndex - j].orgPos;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.node.getComponent('utils').objCollection[snowballIndex].y -= this.snowballSpd;\r\n\t\t}\r\n\t\tfor (let i = 0; i < this.snowballIndexList_2.length; i++) {\r\n\t\t\tlet snowballIndex = this.snowballIndexList_2[0] + i;\r\n\t\t\tif (this.node.getComponent('utils').checkCollapsed(this.player, this.node.getComponent('utils').objCollection[snowballIndex], this.player.node.width / 2 + this.snowballPrefab.data.width / 2 - 15)) {\r\n\t\t\t\tcc.director.loadScene('GameOver');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.node.getComponent('utils').objCollection[snowballIndex].dir == -1) {\r\n\t\t\t\tif (this.node.getComponent('utils').objCollection[snowballIndex].x < -this.node.width / 2 - this.snowballPrefab.data.width / 2) {\r\n\t\t\t\t\tthis.node.getComponent('utils').objCollection[snowballIndex].x = this.node.getComponent('utils').objCollection[snowballIndex].orgPos;\r\n\t\t\t\t}\r\n\t\t\t} else if (this.node.getComponent('utils').objCollection[snowballIndex].x > this.node.width / 2 + this.snowballPrefab.data.width / 2) {\r\n\t\t\t\t\tthis.node.getComponent('utils').objCollection[snowballIndex].x = this.node.getComponent('utils').objCollection[snowballIndex].orgPos;\r\n\t\t\t}\r\n\t\t\tthis.node.getComponent('utils').objCollection[snowballIndex].x += (this.snowballSpd + 1) * this.node.getComponent('utils').objCollection[snowballIndex].dir;\r\n\t\t}\r\n\t},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tlet backgroundNode = cc.find(\"background\");\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\tcc.director.loadScene('Stage_0' + backgroundNode.stage);\r\n\t\t\tcc.game.removePersistRootNode(backgroundNode);\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        tutorial_0: {\r\n\t\t\tdefault: null,\r\n\t\t\tisActive: true,\r\n            type: cc.Node\r\n\t\t},\r\n\t\ttutorial_1: {\r\n\t\t\tdefault: null,\r\n\t\t\tisActive: false,\r\n            type: cc.Node\r\n\t\t}\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.tutorial_1.active = false;\r\n\t\tlet here = this;\r\n\t\tlet endTut = false;\r\n\t\tthis.node.on('touchstart', function(){\r\n\t\t\t//here.tutorial_0.active = here.tutorial_0.isActive = !here.tutorial_0.isActive;\r\n\t\t\tif (!endTut) {\r\n\t\t\t\there.tutorial_1.active = here.tutorial_1.isActive = !here.tutorial_1.isActive;\r\n\t\t\t\tendTut = true;\r\n\t\t\t} else {\r\n\t\t\t\tcc.director.loadScene('Stage_01');\r\n\t\t\t}\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchmove', function (event) {\r\n\r\n\t\t\tvar delta = event.touch.getDelta();\r\n\r\n\t\t\tthis.x += delta.x;\r\n\t\t\tthis.y += delta.y;\r\n\r\n\t\t}, this.node);\r\n\r\n\t\tthis.node.on('touchend', function () {\r\n\t\t}, this.node);\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","/*\r\n * This script is automatically generated by Cocos Creator and is only compatible with projects prior to v2.1.0.\r\n * You do not need to manually add this script in any other project.\r\n * If you don't use cc.Toggle in your project, you can delete this script directly.\r\n * If your project is hosted in VCS such as git, submit this script together.\r\n *\r\n * 此脚本由 Cocos Creator 自动生成，仅用于兼容 v2.1.0 之前版本的工程，\r\n * 你无需在任何其它项目中手动添加此脚本。\r\n * 如果你的项目中没用到 Toggle，可直接删除该脚本。\r\n * 如果你的项目有托管于 git 等版本库，请将此脚本一并上传。\r\n */\r\n\r\nif (cc.Toggle) {\r\n    // Whether the 'toggle' and 'checkEvents' events are fired when 'toggle.check() / toggle.uncheck()' is called in the code\r\n    // 在代码中调用 'toggle.check() / toggle.uncheck()' 时是否触发 'toggle' 与 'checkEvents' 事件\r\n    cc.Toggle._triggerEventInScript_check = true;\r\n}\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\t\toutlinePrefab: {\r\n\t\t\tdefault: null,\r\n            type: cc.Prefab\r\n\t\t},\r\n\t\tscoreDisplay: {\r\n            default: null,\r\n            type: cc.Label\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tthis.boundLeft = -this.node.width / 2;\r\n\t\tthis.boundBot = -this.node.height / 2;\r\n\t\tthis.gapX = this.node.width % this.outlinePrefab.data.width / 2;\r\n\t\tthis.gapY = this.node.height % this.outlinePrefab.data.height / 2;\r\n\t\tthis.outlinePool = new cc.NodePool();\r\n\t\tthis.colCount = Math.floor(this.node.width / this.outlinePrefab.data.width);\r\n\t\tthis.rowCount = Math.floor(this.node.height / this.outlinePrefab.data.height);\r\n\t\tthis.totalScore = this.rowCount * this.colCount;\r\n\t\tfor (let i = 0; i < this.totalScore; i++) {\r\n\t\t\tlet outline = cc.instantiate(this.outlinePrefab); // create node instance\r\n\t\t\tthis.outlinePool.put(outline); // populate your pool with put method\r\n\t\t\tthis.createOutline(this.node, i);\r\n\t\t}\r\n\t\tthis.score = 0;\r\n\t\tthis.scoreDisplay.zIndex = 3;\r\n\t\tthis.objCollection = [];\r\n\t},\r\n\t\r\n\tgetCellPos(col, row) {\r\n\t\treturn cc.v2(this.gapX + this.boundLeft + this.outlinePrefab.data.width / 2 + this.outlinePrefab.data.width * (col - 1),  this.gapY + this.boundBot + this.outlinePrefab.data.height / 2 + this.outlinePrefab.data.height * (row - 1));\r\n\t},\r\n\t\r\n\tcreateOutline: function (parentNode, order) {\r\n\t\tlet outline = null;\r\n\t\tif (this.outlinePool.size() > 0) { // use size method to check if there're nodes available in the pool\r\n\t\t\toutline = this.outlinePool.get();\r\n\t\t} else { // if not enough node in the pool, we call cc.instantiate to create node\r\n\t\t\toutline = cc.instantiate(this.outlinePrefab);\r\n\t\t}\r\n\t\toutline.parent = parentNode; // add new outline node to the node tree\r\n\t\t//outline.getComponent('outline').init(); //initialize outline\r\n\t\tlet row = Math.floor(order / this.colCount);\r\n\t\tlet col = order;\r\n\t\tif (order > this.colCount - 1) {\r\n\t\t\tcol = order - this.colCount * row;\r\n\t\t}\r\n\t\toutline.setPosition(this.getCellPos(col + 1, row + 1));\r\n\t\t//(cc.v2(this.gapX + this.boundLeft + this.outlinePrefab.data.width / 2 + this.outlinePrefab.data.width * col, this.gapY + this.boundBot + this.outlinePrefab.data.height / 2 + this.outlinePrefab.data.height * row));\r\n\t},\r\n\r\n\tcreateObj: function (parentNode, pos, objPrefab, pool, getCellPos) {\r\n\t\tlet obj = cc.instantiate(objPrefab); // create node instance\r\n\t\tpool.put(obj); // populate your pool with put method\r\n\t\tif (getCellPos) {\r\n\t\t\tpos = this.getCellPos(pos.x, pos.y);\r\n\t\t}\r\n\t\t//let obj = null;\r\n\t\tif (pool.size() > 0) { // use size method to check if there're nodes available in the pool\r\n\t\t\tobj = pool.get();\r\n\t\t} else { // if not enough node in the pool, we call cc.instantiate to create node\r\n\t\t\tobj = cc.instantiate(objPrefab);\r\n\t\t}\r\n\t\tobj.parent = parentNode;\r\n\t\tobj.setPosition(pos);\r\n\t\tobj.zIndex = 1;\r\n\t\tthis.objCollection.push(obj);\r\n\t\treturn pos;\r\n\t},\r\n\t\r\n\tcreateObstacle: function (parentNode, pos, objPrefab, pool, getCellPos) {\r\n\t\tthis.totalScore -= 1;\r\n\t\treturn this.createObj(parentNode, pos, objPrefab, pool, getCellPos);\t\t\r\n\t},\r\n\t\r\n\tputObj: function (parentNode, pos, objPrefab, pool, objPosArray, character) {\r\n\t\tthis.createObj(parentNode, pos, objPrefab, pool, false);\r\n\t\tobjPosArray.push(cc.v2(pos.x, pos.y));\r\n\t\tthis.score += 1;\r\n\t\tthis.scoreDisplay.string = 'Score: ' + this.score + '/' + this.totalScore;\r\n\t\tif (character != null) {\r\n\t\t\tcharacter.updateCapturedCell();\r\n\t\t}\r\n\t\treturn this.score;\r\n\t},\r\n\t\r\n\tcheckCollapsed: function (obj_1, obj_2, checkDist) {\r\n\t\tlet dis = obj_1.node.position.sub(obj_2.getPosition()).mag();\r\n\t\treturn dis < checkDist;\r\n\t},\r\n\t\r\n    start () {\r\n\t\t\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n","// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\t\tscoreDisplay: {\r\n            default: null,\r\n            type: cc.Label\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n\t\tlet backgroundNode = cc.find(\"background\");\r\n\t\tthis.scoreDisplay.string = 'SCORE: ' + backgroundNode.score + '/' + backgroundNode.totalScore;\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"],"file":"index.js"}