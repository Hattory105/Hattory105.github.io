<!DOCTYPE html>
 <html>
    <body>
        <h1>WebSocket client html</h1>
        <label>You need to launch app Android to create WebSocket Server</label><br>
        <label>Then getting information on your Android device</label><br><br>
        <label for="hostAddress">Host Address:</label>
        <input type="text" id="hostAddress" name="hostAddress" value="192.168.0.180"><br><br>
        <label for="port">Port:</label>
        <input type="text" id="port" name="port" value="12345"><br><br>

        <!--Method: http / https-->
        <label>Please method:</label><br>
        <input type="radio" id="http" name="fav_method" value="ws" checked>
        <label for="http">http</label><br>
        <input type="radio" id="https" name="fav_method" value="wss">
        <label for="https">https</label><br><br>

        <input type="button" id="connect" onclick="connectServer()" value="Connect"><br><br>

        <script>            
            let connected = 0;
            //let count = 0;
            //const ws = new WebSocket("ws://localhost:8082");
            let ws;

            function connectServer() {
                let host = document.getElementById("hostAddress").value;
                let port = document.getElementById("port").value;
                //ws = new WebSocket("ws://192.168.0.144:8082");
                let hostPortWS;
                if(document.getElementById("http").checked == true) {
                    hostPortWS = "ws://" + host + ":" + port;
                } else {
                    hostPortWS = "wss://" + host + ":" + port;
                }
                console.log("hostPortWS: " + hostPortWS);

                ws = new WebSocket(hostPortWS);

                ws.addEventListener("open", () => {
                    console.log("We are connected!");
                    //ws.send("Hey, how's it going?");
                    connected = 1;

                    //Disable and show some buttons
                    document.getElementById("lbldata").style.display = "block";
                    document.getElementById("data").style.display = "block";
                    document.getElementById("btnData").style.display = "block";
                    document.getElementById("connect").setAttribute("disabled", true);
                    document.getElementById("hostAddress").setAttribute("disabled", true);
                    document.getElementById("port").setAttribute("disabled", true);
                })

                ws.addEventListener("message", e => {
                    console.log(e);
                    //console.log(e.data);
                    //console.log(e.origin);
                });

                ws.addEventListener("close", e => {
                    console.log(e);
                    connected = 0;
                    //count = 0;
                });

                ws.addEventListener("error", e => {
                    console.log(e);
                });
            }

            function sendData() {
                if(connected == 1) {
                    //count++;
                    //ws.send("Send data time " + count);
                    let data = document.getElementById("data").value;
                    ws.send(data);
                }
            }
			
			function sendAction(a) {
                if(connected == 1) {
                    let action = a;
                    ws.send(action);
                }
            }
			
            function mouseDown(a) {
                console.log("mouseDown: " + a);
                document.getElementById("myText").innerText += "\n" + "mouseDown: " + a;
            }
			
            function mouseUp(a) {
                console.log("mouseUp: " + a);
                document.getElementById("myText").innerText += "\n" + "mouseUp: " + a;
            }

        </script>
		<!-- <link rel="stylesheet" href="script/style.css" /> -->
        

        <label for="data" id="lbldata" style="display: none;">Send data:</label>
        <input type="text" id="data" name="data" value="data 1" style="display: none;"><br>
        <input type="button" id="btnData" onclick="sendData()" value="Send Data" style="display: none;">
        <div align="left">
            <table width="120" border="0">
              <tr>
                <td>&nbsp;</td>
                <!-- <td><button onClick="sendAction(2)"> <img src="images/up.png" width="60dp" height="60dp" /></button></td> -->
                <td><button id="myUp" onmousedown="mouseDown('up')" onmouseup="mouseUp('up')" onClick="sendAction(2)" value="up" width="60dp" height="60dp">Up</button></td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td><button id="myLeft" onmousedown="mouseDown('left')" onmouseup="mouseUp('left')" onClick="sendAction(1)">Left</button></td>
                <td></td>
                <td><button id="myRight" onmousedown="mouseDown('right')" onmouseup="mouseUp('right')" onClick="sendAction(3)">Right</button></td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td><button id="myDown" onmousedown="mouseDown('down')" onmouseup="mouseUp('down')" onClick="sendAction(4)">Down</button></td>
                <td>&nbsp;</td>
              </tr>
            </table>
        </div>        
        <label id="myText">Input:</label>
    </body>
</html>
