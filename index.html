<!DOCTYPE html>
 <html>
    <style>
        body {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        } 
    </style>
    <body oncontextmenu="return false;" onselectstart="return false;">
        
        <!-- <h1>WebSocket client html</h1>
        <label>You need to launch app Android to create WebSocket Server</label><br>
        <label>Then getting information on your Android device</label><br><br>
        <label for="hostAddress">Host Address:</label>
        <input type="text" id="hostAddress" name="hostAddress" value="192.168.0.180"><br><br>
        <label for="port">Port:</label>
        <input type="text" id="port" name="port" value="12345"><br><br>

        
        <label>Please method:</label><br>
        <input type="radio" id="http" name="fav_method" value="ws" checked>
        <label for="http">http</label><br>
        <input type="radio" id="https" name="fav_method" value="wss">
        <label for="https">https</label><br><br>

        <input type="button" id="connect" onclick="connectServer()" value="Connect"><br><br> -->

        <script>            
            let connected = 0;
            //let count = 0;
            //const ws = new WebSocket("ws://localhost:8082");
            let ws;

            function connectServer() {
                let host = document.getElementById("hostAddress").value;
                let port = document.getElementById("port").value;
                //ws = new WebSocket("ws://192.168.0.144:8082");
                let hostPortWS;
                if(document.getElementById("http").checked == true) {
                    hostPortWS = "ws://" + host + ":" + port;
                } else {
                    hostPortWS = "wss://" + host + ":" + port;
                }
                console.log("hostPortWS: " + hostPortWS);

                ws = new WebSocket(hostPortWS);

                ws.addEventListener("open", () => {
                    console.log("We are connected!");
                    //ws.send("Hey, how's it going?");
                    connected = 1;

                    //Disable and show some buttons
                    document.getElementById("lbldata").style.display = "block";
                    document.getElementById("data").style.display = "block";
                    document.getElementById("btnData").style.display = "block";
                    document.getElementById("connect").setAttribute("disabled", true);
                    document.getElementById("hostAddress").setAttribute("disabled", true);
                    document.getElementById("port").setAttribute("disabled", true);
                })

                ws.addEventListener("message", e => {
                    console.log(e);
                    //console.log(e.data);
                    //console.log(e.origin);
                });

                ws.addEventListener("close", e => {
                    console.log(e);
                    connected = 0;
                    //count = 0;
                });

                ws.addEventListener("error", e => {
                    console.log(e);
                });
            }

            function sendData() {
                if(connected == 1) {
                    //count++;
                    //ws.send("Send data time " + count);
                    let data = document.getElementById("data").value;
                    ws.send(data);
                }
            }
			
			function sendAction(a) {
                if(connected == 1) {
                    let action = a;
                    ws.send(action);
                }
            }
			
            function touchStart(a) {
                console.log("ontouchstart: " + a);
                document.getElementById("myText").innerText += "\n" + "ontouchstart: " + a;
            }
			
            function touchEnd(a) {
                console.log("ontouchend: " + a);
                document.getElementById("myText").innerText += "\n" + "ontouchend: " + a;
            }

            // document.addEventListener("keydown", function(e) {
            //     if(e.key == "Enter") {
            //         toggleFullScreen();
            //     }
            // }, false);

            var isFullScreen = false;
            var elem = document.documentElement;

            function toggleFullScreen() {
                if(isFullScreen == false) {
                    if (elem.requestFullscreen) {
                        elem.requestFullscreen();
                        isFullScreen = true;
                    } else if (elem.webkitRequestFullscreen) { /* Safari */
                        elem.webkitRequestFullscreen();
                        isFullScreen = true;
                    } else if (elem.msRequestFullscreen) { /* IE11 */
                        elem.msRequestFullscreen();
                        isFullScreen = true;
                    }
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                        isFullScreen = false;
                    } else if (document.webkitExitFullscreen) { /* Safari */
                        document.webkitExitFullscreen();
                        isFullScreen = false;
                    } else if (document.msExitFullscreen) { /* IE11 */
                        document.msExitFullscreen();
                        isFullScreen = false;
                    }
                }

                if(isFullScreen == false) {
                    document.getElementById("btnFullScreen").value = "Full Screen";
                } else {
                    document.getElementById("btnFullScreen").value = "Exit Full Screen";
                }
            }

            // document.oncontextmenu = function(e){
            //     var evt = new Object({keyCode:93});
            //     stopEvent(e);
            //     keyboardUp(evt);
            // }

            // function stopEvent(event){
            //     if(event.preventDefault != undefined)
            //         event.preventDefault();
            //     if(event.stopPropagation != undefined)
            //         event.stopPropagation();
            // }
            function clearText() {
                document.getElementById("myText").innerText = "Touch: ";
            }

        </script>
		<!-- <link rel="stylesheet" href="script/style.css" /> -->
        

        <label for="data" id="lbldata" style="display: none;">Send data:</label>
        <input type="text" id="data" name="data" value="data 1" style="display: none;"><br>
        <input type="button" id="btnData" onclick="sendData()" value="Send Data" style="display: none;">
        <div align="left">
            <table width="120" border="0">
              <tr>
                <td>&nbsp;</td>
                <!-- <td><button onClick="sendAction(2)"> <img src="images/up.png" width="60dp" height="60dp" /></button></td> -->
                <td><button id="myUp" ontouchstart="touchStart('up')" ontouchend="touchEnd('up')" onClick="sendAction(2)"> <img src="images/up.png" width="60dp" height="60dp"/></button></td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td><button id="myLeft" ontouchstart="touchStart('left')" ontouchend="touchEnd('left')" onClick="sendAction(1)"><img src="images/left.png" width="60dp" height="60dp"/> </button></td>
                <td></td>
                <td><button id="myRight" ontouchstart="touchStart('right')" ontouchend="touchEnd('right')" onClick="sendAction(3)"><img src="images/right.png" width="60dp" height="60dp"/></button></td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td><button  id="myDown" ontouchstart="touchStart('down')" ontouchend="touchEnd('down')" onClick="sendAction(4)"><img src="images/down.png" width="60dp" height="60dp"/> </button></td>
                <td>&nbsp;</td>
              </tr>
            </table>
        </div>        
        <br><input type="button" id="btnFullScreen" onclick="toggleFullScreen()" value="Full Screen"><br><br>
        <input type="button" id="btnClearText" onclick="clearText()" value="Clear Text"><br><br>
        <label id="myText">Touch 7:</label>
    </body>
</html>
