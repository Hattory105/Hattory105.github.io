<html>
    <body>
        <h1>WebSocket client html</h1>
        <label>You need to launch app Android to create WebSocket Server</label><br>
        <label>Then getting information on your Android device</label><br><br>
        <label for="hostAddress">Host Address:</label>
        <input type="text" id="hostAddress" name="hostAddress" value="192.168.0.144"><br><br>
        <label for="port">Port:</label>
        <input type="text" id="port" name="port" value="12345"><br><br>
        <input type="button" id="connect" onclick="connectServer()" value="Connect"><br><br><br>
        <script>
            
            let connected = 0;
            //let count = 0;
            //const ws = new WebSocket("ws://localhost:8082");
            let ws;

            function connectServer() {
                let host = document.getElementById("hostAddress").value;
                let port = document.getElementById("port").value;
                //ws = new WebSocket("ws://192.168.0.144:8082");
                let hostPortWS = "ws://" + host + ":" + port;
                console.log("hostPortWS: " + hostPortWS);

                ws = new WebSocket(hostPortWS);

                ws.addEventListener("open", () => {
                    console.log("We are connected!");
                    //ws.send("Hey, how's it going?");
                    connected = 1;

                    //Disable and show some buttons
                    document.getElementById("btnUp").disabled = false;
                    document.getElementById("btnLeft").disabled = false;
                    document.getElementById("btnRight").disabled = false;
                    document.getElementById("btnDown").disabled = false;
                    document.getElementById("lbldata").style.display = "block";
                    document.getElementById("data").style.display = "block";
                    document.getElementById("btnData").style.display = "block";
                    document.getElementById("connect").setAttribute("disabled", true);
                    document.getElementById("hostAddress").setAttribute("disabled", true);
                    document.getElementById("port").setAttribute("disabled", true);
                })

                ws.addEventListener("message", e => {
                    console.log(e);
                    //console.log(e.data);
                    //console.log(e.origin);
                });

                ws.addEventListener("close", e => {
                    console.log(e);
                    connected = 0;
                    //count = 0;
                });

                ws.addEventListener("error", e => {
                    console.log(e);
                });
            }

            function sendData(text) {
                if(connected == 1) {
                    //count++;
                    //ws.send("Send data time " + count);
                    let data;
                    if(text == undefined || text == null || text == "") {
                        data = document.getElementById("data").value;
                    } else {
                        data = text;
                    }

                    ws.send(data);
                }
            }
        </script>

        <label id="lblGuide">Control your game/app:</label><br><br>
        <input type="button" id="btnUp" onclick="sendData('Up')" value="Up" disabled><br><br>
        <input type="button" id="btnLeft" onclick="sendData('Left')" value="Left" disabled>
        <input type="button" id="btnRight" onclick="sendData('Right')" value="Right" disabled><br><br>
        <input type="button" id="btnDown" onclick="sendData('Down')" value="Down" disabled><br><br><br>
        <label for="data" id="lbldata" style="display: none;">Input text:</label>
        <input type="text" id="data" name="data" value="hello 123" style="display: none;"><br>
        <input type="button" id="btnData" onclick="sendData()" value="Send Text" style="display: none;">
    </body>
</html>